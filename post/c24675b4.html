<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>MySQL | 流光</title><meta name="author" content="流光"><meta name="copyright" content="流光"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MySQL数据库数据库：存储数据的仓库 之前我们可以使用数组、集合、IO存储数据。其中数组和集合的数据在内存中，IO可以将数据持久化存储。 我们在实际开发中很多业务是需要将数据持久化的，此时使用IO将数据存储成一个普通的文件行不行？ 可以，但是不高效。比如我们将用户的数据存储成一个txt文件： 12341000 张三 20 男 北京 海淀区1002 李四 21 男 上海 浦东区1003 韩梅梅 2">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL">
<meta property="og:url" content="http://example.com/post/c24675b4.html">
<meta property="og:site_name" content="流光">
<meta property="og:description" content="MySQL数据库数据库：存储数据的仓库 之前我们可以使用数组、集合、IO存储数据。其中数组和集合的数据在内存中，IO可以将数据持久化存储。 我们在实际开发中很多业务是需要将数据持久化的，此时使用IO将数据存储成一个普通的文件行不行？ 可以，但是不高效。比如我们将用户的数据存储成一个txt文件： 12341000 张三 20 男 北京 海淀区1002 李四 21 男 上海 浦东区1003 韩梅梅 2">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://w.wallhaven.cc/full/g7/wallhaven-g76m7d.jpg">
<meta property="article:published_time" content="2022-06-17T02:09:16.000Z">
<meta property="article:modified_time" content="2022-06-17T09:14:03.636Z">
<meta property="article:author" content="流光">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://w.wallhaven.cc/full/g7/wallhaven-g76m7d.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/post/c24675b4"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="/%E5%8D%9A%E5%AE%A2" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-06-17 17:14:03'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://w.wallhaven.cc/full/g7/wallhaven-g76m7d.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">流光</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">MySQL</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-17T02:09:16.000Z" title="发表于 2022-06-17 10:09:16">2022-06-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-06-17T09:14:03.636Z" title="更新于 2022-06-17 17:14:03">2022-06-17</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="MySQL"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="MySQL数据库"><a href="#MySQL数据库" class="headerlink" title="MySQL数据库"></a>MySQL数据库</h1><p>数据库：存储数据的仓库</p>
<p>之前我们可以使用数组、集合、IO存储数据。其中数组和集合的数据在内存中，IO可以将数据持久化存储。</p>
<p>我们在实际开发中很多业务是需要将数据持久化的，此时使用IO将数据存储成一个普通的文件行不行？</p>
<p>可以，但是不高效。比如我们将用户的数据存储成一个txt文件：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1000 张三 20 男 北京 海淀区</span><br><span class="line">1002 李四 21 男 上海 浦东区</span><br><span class="line">1003 韩梅梅 22 女 成都 武侯区</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>

<p>此时如果我们需要查询年龄大于21岁的用户有哪些。我们需要将文本中的每一行信息读取出来，然后按照空格分割，得到age字符串，再将字符串转成int，然后做比较。这样操作会发现数据越多处理效率越低。</p>
<p>如果我们需要将1003的地址修改成重庆 渝北区，发现需要将数据全部读取，修改后的数据重新覆盖整个旧文件，依然效率低下。</p>
<p>以上的操作之所以效率低下，是因为我们存储数据的数据结构没有专门的进行设计，就是一个普通的文本文件，所有数据在一起，全部是String。</p>
<p>为了解决在实际开发中操作数据的高效问题，就产生了数据库这种产品。<strong>数据库也是将数据持久化存储成多个文件，这些文件都是经过专门的设计的，底层有专门的数据结构来存储数据，所以我们直接打开数据库的数据文件是看不懂的，只有数据库软件可以读取。</strong></p>
<p><strong>数据库：高效存储和操作数据的仓库</strong></p>
<h2 id="MySQL相关的概念"><a href="#MySQL相关的概念" class="headerlink" title="MySQL相关的概念"></a>MySQL相关的概念</h2><p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/image-20220330090451104.png" alt="image-20220330090451104"></p>
<h2 id="数据库的分类"><a href="#数据库的分类" class="headerlink" title="数据库的分类"></a>数据库的分类</h2><h3 id="关系型数据库"><a href="#关系型数据库" class="headerlink" title="关系型数据库"></a>关系型数据库</h3><p>关系型数据库就是由<strong>二维表</strong>及<strong>其之间的关系</strong>组成的一个数据组织。</p>
<h4 id="常见的关系型数据库"><a href="#常见的关系型数据库" class="headerlink" title="常见的关系型数据库"></a>常见的关系型数据库</h4><ul>
<li>Oracle- 甲骨文</li>
<li>DB2  - IBM</li>
<li>MySQL - 甲骨文</li>
<li>SQLServer - 微软</li>
<li>SQLite - 移动端</li>
</ul>
<h3 id="非关系型数据库-NoSQL"><a href="#非关系型数据库-NoSQL" class="headerlink" title="非关系型数据库  -NoSQL"></a>非关系型数据库  -NoSQL</h3><p>NoSQL &#x3D; Not Only SQL</p>
<p>不是二维表结构，表之间也没有关系,无模式</p>
<h4 id="常见的非关系型数据库"><a href="#常见的非关系型数据库" class="headerlink" title="常见的非关系型数据库"></a>常见的非关系型数据库</h4><ul>
<li>Redis  – kv格式的数据库</li>
<li>MongoDB – 文档型数据库 </li>
<li>HBase  – 列族式数据库</li>
</ul>
<h2 id="MySQL下载和安装"><a href="#MySQL下载和安装" class="headerlink" title="MySQL下载和安装"></a>MySQL下载和安装</h2><p>下载地址：<a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/windows/installer/5.7.html">https://dev.mysql.com/downloads/windows/installer/5.7.html</a></p>
<p>配置MySQL环境变量</p>
<h2 id="MySQL客户端"><a href="#MySQL客户端" class="headerlink" title="MySQL客户端"></a>MySQL客户端</h2><ul>
<li><p><strong>DOS窗口 (需要使用命令)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\NINGMEI&gt;mysql -hlocalhost -P3306 -uroot -p123456</span><br><span class="line">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line"></span><br><span class="line">mysql&gt; exit</span><br><span class="line">Bye</span><br></pre></td></tr></table></figure>

<p>如果连接数据库的时候使用的是<code>-hlocalhost -P3306</code>，那么-h和-P可以省略</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\NINGMEI&gt;mysql -uroot -p123456</span><br><span class="line">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 6</span><br></pre></td></tr></table></figure>

<p>以上的写法不安全，密码明文显示了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\NINGMEI&gt;mysql -uroot -p</span><br><span class="line">Enter password: ******</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>自带的workbench</strong></p>
</li>
<li><p><strong>第三方的客户端 （Navicat）</strong></p>
</li>
</ul>
<h2 id="SQL语句"><a href="#SQL语句" class="headerlink" title="SQL语句"></a>SQL语句</h2><p>SQL：结构化查询语言（Structured Query Language）</p>
<p><strong>MySQL中SQL语句关键字推荐使用大写</strong></p>
<h3 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h3><ul>
<li>DDL语句 - 数据定义语言（data definition language）<ul>
<li>操作数据库相关对象（数据库、表、索引、视图等）</li>
<li>代表性的关键字：create、alter、drop</li>
</ul>
</li>
<li>DML语句 - 数据操作语言（Data Manipulation Language）<ul>
<li>对表中的数据进行增加、删除、修改</li>
<li>代表性的关键字：insert、delete、update</li>
</ul>
</li>
<li>DQL语句 - 数据查询语言（data query language）<ul>
<li>查询表中的数据</li>
<li>代表性的关键字：select</li>
</ul>
</li>
<li>TCL语句 - 事务控制语句（Transaction Control language）<ul>
<li>事务的操作</li>
</ul>
</li>
</ul>
<h2 id="MySQL的数据类型"><a href="#MySQL的数据类型" class="headerlink" title="MySQL的数据类型"></a>MySQL的数据类型</h2><p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/image-20220330112554284.png" alt="image-20220330112554284"></p>
<p><strong>MySQL的数据类型就是字段的数据类型。</strong></p>
<h3 id="数字类型"><a href="#数字类型" class="headerlink" title="数字类型"></a>数字类型</h3><ul>
<li><p>整型（精确值）</p>
<table>
<thead>
<tr>
<th align="left">Type</th>
<th align="left">Storage (Bytes)</th>
<th align="left">Minimum Value Signed(有符号)</th>
<th align="left">Minimum Value Unsigned(无符号)</th>
<th align="left">Maximum Value Signed</th>
<th align="left">Maximum Value Unsigned</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>TINYINT</code></td>
<td align="left">1</td>
<td align="left"><code>-128</code></td>
<td align="left"><code>0</code></td>
<td align="left"><code>127</code></td>
<td align="left"><code>255</code></td>
</tr>
<tr>
<td align="left"><code>SMALLINT</code></td>
<td align="left">2</td>
<td align="left"><code>-32768</code></td>
<td align="left"><code>0</code></td>
<td align="left"><code>32767</code></td>
<td align="left"><code>65535</code></td>
</tr>
<tr>
<td align="left"><code>MEDIUMINT</code></td>
<td align="left">3</td>
<td align="left"><code>-8388608</code></td>
<td align="left"><code>0</code></td>
<td align="left"><code>8388607</code></td>
<td align="left"><code>16777215</code></td>
</tr>
<tr>
<td align="left"><code>INT</code></td>
<td align="left">4</td>
<td align="left"><code>-2147483648</code></td>
<td align="left"><code>0</code></td>
<td align="left"><code>2147483647</code></td>
<td align="left"><code>4294967295</code></td>
</tr>
<tr>
<td align="left"><code>BIGINT</code></td>
<td align="left">8</td>
<td align="left"><code>-2^63</code></td>
<td align="left"><code>0</code></td>
<td align="left"><code>2^63-1</code></td>
<td align="left"><code>2^64-1</code></td>
</tr>
</tbody></table>
</li>
<li><p>浮点型（近似值）</p>
<ul>
<li>float 单精度，占4个字节</li>
<li>double 双精度，占8个字节</li>
<li>float(d)、double(d) ,d从 0 到 23 的精度会产生一个 4 字节的单精度 列。从 24 到 53 的精度会产生一个 8 字节的双精度列。 </li>
<li>MySQL支持非标准的SQL: FLOAT(<em><code>M</code></em>,<em><code>D</code></em>),DOUBLE(<em><code>M</code></em>,<em><code>D</code></em>)<ul>
<li>M表示总的数字位数</li>
<li>D表示小数位数，如果小数未超出了D的范围，会四舍五入。但是四舍五入后整数必须满足M的范围，否则出错</li>
</ul>
</li>
</ul>
</li>
<li><p>定点型（精确值）</p>
<ul>
<li>DECIMAL(M,D)<ul>
<li>M表示总的数字位数</li>
<li>D表示小数位数</li>
<li>DECIMAL(M,0) 等价于DECIMAL(M)。就是个整数</li>
<li>DECIMAL的最大位数65位</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><ul>
<li>定长字符串：char(n),n表示字符的数量<ul>
<li>例如， <code>CHAR(30)</code>最多可容纳 30 个字符</li>
<li>n的取值范围0-255个字符</li>
<li>定长指的是，插入的数据长度小于n,尾部会使用空格将长度填充到n</li>
<li>弊端：浪费空间；优点：效率高 （以空间换时间）</li>
</ul>
</li>
<li>可变字符串： varchar(n),n表示字符的数量<ul>
<li>例如， <code>VARCHAR(30)</code>最多可容纳 30 个字符</li>
<li>n的取值范围0-65535个字节**(受到行大小（65535字节）的限制)**</li>
<li>可变的意思是，varchar中的数据占据的真实数据的长度的空间，不足n也不会使用空间填充</li>
<li><code>VARCHAR</code>值存储为 1 字节或 2 字节长度前缀加上数据。长度前缀表示值中的字节数。如果值需要不超过 255 个字节，则一列使用一个长度字节，如果值可能需要超过 255 个字节，则使用两个长度字节。</li>
<li>优点：节约空间；弊端：效率低（以时间换空间）</li>
<li>varchar字符数&#x3D; （65535 - 每个字段占据的内存大小 - 2 字节长度前缀 - 1字节） &#x2F; 字符集中单个字符的最大长度</li>
</ul>
</li>
<li>文本类型 - Text<ul>
<li>Text类型的数据只有9-12个字节和其他的字段共享行大小（65535字节）</li>
<li>Text的数据部分是单独存储的，所以Text类型的数据大小不受到行大小（65535字节）的限制</li>
<li>Text不能使用索引</li>
</ul>
</li>
</ul>
<h3 id="日期时间类型"><a href="#日期时间类型" class="headerlink" title="日期时间类型"></a>日期时间类型</h3><ul>
<li>date: 日期类型<ul>
<li>只有年月日</li>
<li>取值范围：<code>&#39;1000-01-01&#39;</code> to <code>&#39;9999-12-31&#39;</code>.</li>
</ul>
</li>
<li>time: 时间类型<ul>
<li>只有时分秒</li>
<li>取值范围：’-838:59:59’<code>to</code>‘838:59:59’</li>
<li>time不仅表示时间，还表示时间的间隔</li>
</ul>
</li>
<li>year: 年<ul>
<li>只有年份</li>
<li>四位的年份取值范围：’1901’<code>to</code>‘2155’</li>
</ul>
</li>
<li>datetime：日期时间类型<ul>
<li>有年月日时分秒</li>
<li>取值范围：<code>&#39;1000-01-01 00:00:00&#39;</code> to <code>&#39;9999-12-31 23:59:59&#39;</code>.</li>
<li>值不受时区的影响</li>
</ul>
</li>
<li>timestamp: 时间戳<ul>
<li>有年月日时分秒</li>
<li>取值范围：1970-01-01 00:00:01’<code>UTC to</code>‘2038-01-19 03:14:07’</li>
<li>值受时区的影响</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- 创建表</span><br><span class="line">create table if not exists db01.test(</span><br><span class="line">  name varchar(20),</span><br><span class="line">	info text,</span><br><span class="line">	time1 datetime,</span><br><span class="line">	time2 timestamp</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 更改时区为西八区</span><br><span class="line">set time_zone=&quot;-08:00&quot;;</span><br><span class="line"></span><br><span class="line">select * from db01.test;</span><br></pre></td></tr></table></figure>

<h2 id="DDL语句※※"><a href="#DDL语句※※" class="headerlink" title="DDL语句※※"></a>DDL语句※※</h2><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE &#123;DATABASE | SCHEMA&#125; [IF NOT EXISTS] db_name</span><br><span class="line">    [create_option] ...</span><br><span class="line"></span><br><span class="line">create_option: [DEFAULT] &#123;</span><br><span class="line">    CHARACTER SET [=] charset_name</span><br><span class="line">  | COLLATE [=] collation_name</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 创建数据库</span><br><span class="line">-- if not exists表示数据库不存在就创建，存在不做处理</span><br><span class="line">-- 默认的字符集是 latin1，所以需要指定字符集</span><br><span class="line">create database if not exists db01 character set utf8;</span><br></pre></td></tr></table></figure>

<h3 id="修改数据库"><a href="#修改数据库" class="headerlink" title="修改数据库"></a>修改数据库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ALTER &#123;DATABASE | SCHEMA&#125; [db_name]</span><br><span class="line">    alter_option ...</span><br><span class="line"></span><br><span class="line">alter_option: &#123;</span><br><span class="line">    [DEFAULT] CHARACTER SET [=] charset_name</span><br><span class="line">  | [DEFAULT] COLLATE [=] collation_name</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 切换(使用)数据库</span><br><span class="line">use db01;</span><br><span class="line"></span><br><span class="line">-- 修改数据库的字符集</span><br><span class="line">alter database db01 character set utf8;</span><br></pre></td></tr></table></figure>

<h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP &#123;DATABASE | SCHEMA&#125; [IF EXISTS] db_name</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 删除数据库</span><br><span class="line">drop database if exists db01;</span><br><span class="line">drop database if exists db02;</span><br></pre></td></tr></table></figure>

<h3 id="创建数据表-※※※"><a href="#创建数据表-※※※" class="headerlink" title="创建数据表 ※※※"></a>创建数据表 ※※※</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE [IF NOT EXISTS] tbl_name</span><br><span class="line">    (create_definition,...)</span><br><span class="line">    [table_options]</span><br><span class="line"></span><br><span class="line">CREATE TABLE [IF NOT EXISTS] tbl_name</span><br><span class="line">    [(create_definition,...)]</span><br><span class="line">    [table_options]</span><br><span class="line">    [AS] query_expression</span><br><span class="line"></span><br><span class="line">CREATE TABLE [IF NOT EXISTS] tbl_name</span><br><span class="line">    &#123; LIKE old_tbl_name | (LIKE old_tbl_name) &#125;</span><br><span class="line"></span><br><span class="line">create_definition: &#123;</span><br><span class="line">    col_name column_definition  //字段信息</span><br><span class="line">    // </span><br><span class="line">  | &#123;INDEX | KEY&#125; [index_name] [index_type] (key_part,...) （索引）</span><br><span class="line">      [index_option] ...</span><br><span class="line">  | [CONSTRAINT [symbol]] PRIMARY KEY(主键)</span><br><span class="line">      [index_type] (key_part,...)</span><br><span class="line">      [index_option] ...</span><br><span class="line">  | [CONSTRAINT [symbol]] UNIQUE（唯一） [INDEX | KEY]</span><br><span class="line">      [index_name] [index_type] (key_part,...)</span><br><span class="line">      [index_option] ...</span><br><span class="line">  | [CONSTRAINT [symbol]] FOREIGN KEY （外健）</span><br><span class="line">      [index_name] (col_name,...)</span><br><span class="line">      reference_definition</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">column_definition: &#123;</span><br><span class="line">    data_type [NOT NULL | NULL] [DEFAULT default_value]</span><br><span class="line">      [AUTO_INCREMENT]（自增） [UNIQUE [KEY]] [[PRIMARY] KEY]</span><br><span class="line">      [COMMENT &#x27;string&#x27;]（注解）</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">reference_definition:</span><br><span class="line">    REFERENCES tbl_name (key_part,...)</span><br><span class="line">      [ON DELETE reference_option]</span><br><span class="line">      [ON UPDATE reference_option]</span><br><span class="line"></span><br><span class="line">reference_option:</span><br><span class="line">    RESTRICT | CASCADE | SET NULL | NO ACTION | SET DEFAULT</span><br><span class="line"></span><br><span class="line">table_options:</span><br><span class="line">    table_option [[,] table_option] ...</span><br><span class="line"></span><br><span class="line">table_option: &#123;</span><br><span class="line">    AUTO_INCREMENT [=] value 设置自增初始值</span><br><span class="line">  | [DEFAULT] CHARACTER SET [=] charset_name 设置表的字符集</span><br><span class="line">  | [DEFAULT] COLLATE [=] collation_name </span><br><span class="line">  | COMMENT [=] &#x27;string&#x27; 表的备注</span><br><span class="line">  | ENGINE [=] engine_name  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">query_expression:</span><br><span class="line">    SELECT ...   (Some valid select or union statement)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 创建学生表</span><br><span class="line">create table if not exists db01.student(</span><br><span class="line">  -- 数据库中除了数字外，其余类型的值都是用单引号或双引号引起来</span><br><span class="line">  uid int comment &quot;学号&quot;,</span><br><span class="line">	`name` char(4)  comment &quot;姓名&quot;,</span><br><span class="line">	-- unsigned 表示无符号</span><br><span class="line">	age tinyint unsigned comment &quot;年龄&quot;,</span><br><span class="line">	-- 最后一个字段没有逗号</span><br><span class="line">	sex char(2) comment &quot;性别&quot;</span><br><span class="line">)comment=&quot;学生表&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 查看建库语句</span><br><span class="line">show create database db01;</span><br><span class="line"></span><br><span class="line">-- 查看建表语句</span><br><span class="line">show create table db01.student;</span><br></pre></td></tr></table></figure>

<h3 id="修改数据表"><a href="#修改数据表" class="headerlink" title="修改数据表"></a>修改数据表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE tbl_name</span><br><span class="line">    [alter_option [, alter_option] ...]</span><br><span class="line"></span><br><span class="line">alter_option: &#123;</span><br><span class="line">    table_options</span><br><span class="line">  | ADD [COLUMN] col_name column_definition ————————— 添加字段</span><br><span class="line">        [FIRST | AFTER col_name]   —————————————————— （字段添加位置）</span><br><span class="line">  | ADD [COLUMN] (col_name column_definition,...)</span><br><span class="line">  | ADD &#123;INDEX | KEY&#125; [index_name]  ————————————————— 添加索引</span><br><span class="line">        [index_type] (key_part,...) [index_option] ...</span><br><span class="line">  | ADD [CONSTRAINT [symbol]] PRIMARY KEY    ———————— 添加主键</span><br><span class="line">        [index_type] (key_part,...) </span><br><span class="line">  | ADD [CONSTRAINT [symbol]] UNIQUE [INDEX | KEY]————添加唯一</span><br><span class="line">        [index_name] [index_type] (key_part,...)</span><br><span class="line">        [index_option] ...</span><br><span class="line">  | ADD [CONSTRAINT [symbol]] FOREIGN KEY  —————————— 添加外键</span><br><span class="line">        [index_name] (col_name,...)</span><br><span class="line">        reference_definition</span><br><span class="line">  | ALTER [COLUMN] col_name &#123;    设置默认值</span><br><span class="line">        SET DEFAULT &#123;literal | (expr)&#125;</span><br><span class="line">      | DROP DEFAULT</span><br><span class="line">    &#125;</span><br><span class="line">  | CHANGE [COLUMN] old_col_name new_col_name column_definition</span><br><span class="line">        [FIRST | AFTER col_name]</span><br><span class="line">  | DROP [COLUMN] col_name</span><br><span class="line">  | DROP &#123;INDEX | KEY&#125; index_name</span><br><span class="line">  | DROP PRIMARY KEY</span><br><span class="line">  | DROP FOREIGN KEY fk_symbol</span><br><span class="line">  | MODIFY [COLUMN] col_name column_definition</span><br><span class="line">        [FIRST | AFTER col_name]</span><br><span class="line">  | RENAME &#123;INDEX | KEY&#125; old_index_name TO new_index_name</span><br><span class="line">  | RENAME [TO | AS] new_tbl_name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">table_options:</span><br><span class="line">    table_option [[,] table_option] ...</span><br><span class="line">    </span><br><span class="line">// 修改的字段后可添加的内容</span><br><span class="line">table_option: &#123;</span><br><span class="line">    AUTO_INCREMENT [=] value</span><br><span class="line">  | [DEFAULT] CHARACTER SET [=] charset_name</span><br><span class="line">  | [DEFAULT] COLLATE [=] collation_name</span><br><span class="line">  | COMMENT [=] &#x27;string&#x27;</span><br><span class="line">  | ENGINE [=] engine_name</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">-- 在student表中添加address字段</span><br><span class="line">alter table db01.student add address varchar(20) not null;</span><br><span class="line"></span><br><span class="line">-- 在student表中添加score字段在sex字段之后</span><br><span class="line">alter table db01.student add score int after sex;</span><br><span class="line"></span><br><span class="line">-- 将student表中的uid字段设置成主键</span><br><span class="line">alter table db01.student add primary key(uid);</span><br><span class="line"></span><br><span class="line">-- 将student表中的sex字段改成gender</span><br><span class="line">-- change 主要用于修改字段的名称</span><br><span class="line">alter table db01.student change sex gender char(2);</span><br><span class="line"></span><br><span class="line">-- 将student表中的uid主键设置成自增</span><br><span class="line">alter table db01.student change uid uid int auto_increment;</span><br><span class="line"></span><br><span class="line">-- 将student表中的gender修改成varchar(3)</span><br><span class="line">-- modify更改字段的其他信息，除了名字</span><br><span class="line">alter table db01.student modify gender varchar(3);</span><br><span class="line"></span><br><span class="line">-- 删除student表中的address</span><br><span class="line">alter table db01.student drop address;</span><br><span class="line"></span><br><span class="line">-- 删除student表中的name字段的unique索引</span><br><span class="line">alter table db01.student drop index name_key;</span><br><span class="line"></span><br><span class="line">-- 删除student表中的主键</span><br><span class="line">-- 删除主键之前需要先取消自增</span><br><span class="line">-- 先取消自增</span><br><span class="line">alter table db01.student modify uid int;</span><br><span class="line">-- 删除主键</span><br><span class="line">alter table db01.student drop primary key;</span><br><span class="line"></span><br><span class="line">-- 将student表名修改成t_student</span><br><span class="line">alter table db01.student rename to t_student;</span><br></pre></td></tr></table></figure>

<h3 id="RENAME-TABLE-语句"><a href="#RENAME-TABLE-语句" class="headerlink" title="RENAME TABLE 语句"></a>RENAME TABLE 语句</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RENAME TABLE</span><br><span class="line">    tbl_name TO new_tbl_name</span><br><span class="line">    [, tbl_name2 TO new_tbl_name2] </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 将t_student表名修改成student</span><br><span class="line">rename table t_student to student;</span><br></pre></td></tr></table></figure>

<h3 id="删除数据表"><a href="#删除数据表" class="headerlink" title="删除数据表"></a>删除数据表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE [IF EXISTS]</span><br><span class="line">    tbl_name [, tbl_name] ...</span><br><span class="line">    [RESTRICT | CASCADE]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 删除表</span><br><span class="line">drop table if exists student,student01,student02,student03;</span><br></pre></td></tr></table></figure>

<h3 id="TRUNCATE-TABLE-语句"><a href="#TRUNCATE-TABLE-语句" class="headerlink" title="TRUNCATE TABLE 语句"></a>TRUNCATE TABLE 语句</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TRUNCATE [TABLE] tbl_name</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- truncate清空数据</span><br><span class="line">-- 1.先将数据表删除</span><br><span class="line">-- 2.创建一张空表</span><br><span class="line">truncate table student04;</span><br></pre></td></tr></table></figure>

<h2 id="字段约束"><a href="#字段约束" class="headerlink" title="字段约束"></a>字段约束</h2><p>字段约束的作用就是对字段的值进行限制，保证数据的安全性和完整性。</p>
<h3 id="主键约束-primary-key"><a href="#主键约束-primary-key" class="headerlink" title="主键约束-primary key"></a>主键约束-primary key</h3><ul>
<li>一张表只能有一个主键</li>
<li>主键唯一且非空的</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 创建学生表01</span><br><span class="line">create table if not exists db01.student01(</span><br><span class="line">  -- uid设置成主键</span><br><span class="line">  uid int primary key,</span><br><span class="line">	name char(10),</span><br><span class="line">	age int</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>以上的方式只能将一个字段设置成主键。开发中有时候我们需要将多个字段组合成一个主键,这种主键叫做复合主键。</p>
<p>复合主键需要使用以下的方式设置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 创建学生表02</span><br><span class="line">create table if not exists db01.student02(</span><br><span class="line">  uid int,</span><br><span class="line">	name char(10),</span><br><span class="line">	age int,</span><br><span class="line">	-- 复合主键，主键只有一个，只是这个主键是由两个字段组成的</span><br><span class="line">	primary key(uid,name)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li>如果主键字段的数据类型是数字类型，可以使用自动增长（auto_increment）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- 创建学生表03</span><br><span class="line">create table if not exists db01.student03(</span><br><span class="line">  -- 设置主键并自增,自增初始化是1</span><br><span class="line">  uid int primary key auto_increment,</span><br><span class="line">	name char(10),</span><br><span class="line">	age int</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 创建学生表04</span><br><span class="line">create table if not exists db01.student04(</span><br><span class="line">  -- 设置主键并自增</span><br><span class="line">  uid int primary key auto_increment,</span><br><span class="line">	name char(10),</span><br><span class="line">	age int</span><br><span class="line">	-- 更改自增的初始值为1000</span><br><span class="line">)auto_increment=1000;</span><br></pre></td></tr></table></figure>

<p><strong>在开发中推荐使用一个跟业务无关的字段作为主键。</strong></p>
<h3 id="唯一性约束-unique"><a href="#唯一性约束-unique" class="headerlink" title="唯一性约束 - unique"></a>唯一性约束 - unique</h3><ul>
<li>字段的值不能有重复的</li>
<li>允许为null，且null值不受唯一性约束</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 创建学生表05</span><br><span class="line">create table if not exists db01.student05(</span><br><span class="line">    -- 设置主键并自增</span><br><span class="line">    uid int primary key auto_increment,</span><br><span class="line">	-- name必须唯一</span><br><span class="line">	name char(10) unique,</span><br><span class="line">	age int</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="非空约束-Not-Null"><a href="#非空约束-Not-Null" class="headerlink" title="非空约束 - Not Null"></a>非空约束 - Not Null</h3><ul>
<li>值不能为null</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">-- 创建学生表06</span><br><span class="line">create table if not exists db01.student06(</span><br><span class="line">  -- 设置主键并自增</span><br><span class="line">  uid int primary key auto_increment,</span><br><span class="line">	-- name必须唯一且不能为null</span><br><span class="line">	name char(10) unique not null,</span><br><span class="line">	age int</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 查看表的信息</span><br><span class="line">mysql&gt; desc student06;</span><br><span class="line">+-------+----------+------+-----+---------+----------------+</span><br><span class="line">| Field | Type     | Null | Key | Default | Extra          |</span><br><span class="line">+-------+----------+------+-----+---------+----------------+</span><br><span class="line">| uid   | int(11)  | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| name  | char(10) | NO   | UNI | NULL    |                |</span><br><span class="line">| age   | int(11)  | YES  |     | NULL    |                |</span><br><span class="line">+-------+----------+------+-----+---------+----------------+</span><br></pre></td></tr></table></figure>

<p><strong>unique not null 和primary key的区别</strong>：</p>
<ul>
<li>primary key 一张表只能有一个</li>
<li>unique一张表可以有多个</li>
</ul>
<h3 id="默认值约束-default"><a href="#默认值约束-default" class="headerlink" title="默认值约束 - default"></a>默认值约束 - default</h3><ul>
<li>可以给字段设置默认值</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 创建学生表08</span><br><span class="line">create table if not exists db01.student08(</span><br><span class="line">  uid int,</span><br><span class="line">	-- name必须唯一且不能为null</span><br><span class="line">	name char(10) unique not null default &quot;&quot;,</span><br><span class="line">	age int,</span><br><span class="line">	-- 设置字段的默认值</span><br><span class="line">	sex char(6) default &#x27;male&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="外键约束-后面讲"><a href="#外键约束-后面讲" class="headerlink" title="外键约束 - 后面讲"></a>外键约束 - 后面讲</h3><h2 id="显示宽度"><a href="#显示宽度" class="headerlink" title="显示宽度"></a>显示宽度</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists db01.student09(</span><br><span class="line">  -- 3表示的是显示宽度，需要配合零填充才有效果</span><br><span class="line">  -- 数据不足三位的时候使用零填充会在前面补0</span><br><span class="line">  uid int(3) zerofill,</span><br><span class="line">	name char(10) unique not null default &quot;&quot;,</span><br><span class="line">	age int,</span><br><span class="line">	sex char(6) default &#x27;male&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="DML语句※※"><a href="#DML语句※※" class="headerlink" title="DML语句※※"></a>DML语句※※</h2><blockquote>
<p>DML语句操作的数据表中的数据</p>
</blockquote>
<h3 id="插入语句-insert"><a href="#插入语句-insert" class="headerlink" title="插入语句-insert"></a>插入语句-insert</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">INSERT [INTO] tbl_name</span><br><span class="line">    [(col_name [, col_name] ...)]</span><br><span class="line">    &#123;VALUES | VALUE&#125; (value_list) [, (value_list)] ...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSERT [INTO] tbl_name</span><br><span class="line">    [(col_name [, col_name] ...)]</span><br><span class="line">    SELECT ...</span><br><span class="line"></span><br><span class="line">value_list:</span><br><span class="line">    value [, value] ...</span><br><span class="line">    </span><br><span class="line">value:</span><br><span class="line">    &#123;expr | DEFAULT&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">-- 创建学生表</span><br><span class="line">create table if not exists student (</span><br><span class="line">  _id bigint primary key auto_increment,</span><br><span class="line">	sid int unsigned not null unique,</span><br><span class="line">	name varchar(12) not null,</span><br><span class="line">	gender char(6) default &#x27;male&#x27;,</span><br><span class="line">	province text,</span><br><span class="line">	create_time datetime,</span><br><span class="line">	update_time datetime</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 插入一条数据</span><br><span class="line">insert into student (_id,sid,name,gender,province,create_time,update_time)</span><br><span class="line">values (1,1001,&#x27;zhangsan&#x27;,&#x27;male&#x27;,&#x27;四川省&#x27;,&#x27;2022-03-30 17:22:10&#x27;,&#x27;2022-03-30 17:22:10&#x27;);</span><br><span class="line"></span><br><span class="line">-- 插入多条数据</span><br><span class="line">insert into student (_id,sid,name,gender,province,create_time,update_time)</span><br><span class="line">values (2,1002,&#x27;lisi&#x27;,&#x27;male&#x27;,&#x27;四川省&#x27;,&#x27;2022-03-30 17:25:10&#x27;,&#x27;2022-03-30 17:25:10&#x27;),</span><br><span class="line">(3,1003,&#x27;hanmeimei&#x27;,&#x27;male&#x27;,&#x27;重庆市&#x27;,&#x27;2022-03-30 17:25:10&#x27;,&#x27;2022-03-30 17:25:10&#x27;);</span><br><span class="line"></span><br><span class="line">-- 插入数据的时候，如果是插入全部字段的数据，字段可以不写</span><br><span class="line">insert into student </span><br><span class="line">values (4,1004,&#x27;zhaosi&#x27;,&#x27;male&#x27;,&#x27;四川省&#x27;,&#x27;2022-03-30 17:25:10&#x27;,&#x27;2022-03-30 17:25:10&#x27;),</span><br><span class="line">(5,1005,&#x27;liuneng&#x27;,&#x27;male&#x27;,&#x27;重庆市&#x27;,&#x27;2022-03-30 17:25:10&#x27;,&#x27;2022-03-30 17:25:10&#x27;);</span><br><span class="line"></span><br><span class="line">-- 插入部分字段的数据，字段不可以省略</span><br><span class="line">-- 非空字段必须插入值，除非有默认值</span><br><span class="line">insert into student (sid,name) values (1006,&#x27;test&#x27;);</span><br><span class="line">-- 有默认值的字段，插入数据的时候可以使用default表示默认值</span><br><span class="line">insert into student (sid,name,gender) values (1007,&#x27;test01&#x27;,default);</span><br><span class="line">-- 插入数据的时候，自增的主键可以使用0或null</span><br><span class="line">insert into student (_id,sid,name) values (0,1008,&#x27;test02&#x27;);</span><br><span class="line">insert into student (_id,sid,name) values (null,1009,&#x27;test03&#x27;);</span><br></pre></td></tr></table></figure>

<h3 id="更新语句-update"><a href="#更新语句-update" class="headerlink" title="更新语句-update"></a>更新语句-update</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">UPDATE tableName</span><br><span class="line">    SET assignment_list</span><br><span class="line">    [WHERE where_condition]</span><br><span class="line">    [LIMIT row_count]</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">assignment_list:</span><br><span class="line">    assignment [, assignment] ...</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">assignment:</span><br><span class="line">    col_name = value</span><br><span class="line">    </span><br><span class="line">value:</span><br><span class="line">    &#123;expr | DEFAULT&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">## 将student表中的性别修改成female</span><br><span class="line">## 修改所有行的数据</span><br><span class="line">update student set gender = &#x27;female&#x27;;</span><br><span class="line"></span><br><span class="line">## 修改前三行的数据</span><br><span class="line">update student set gender = &#x27;male&#x27; limit 3;</span><br><span class="line"></span><br><span class="line">## 将student中sid为1006的gender修改成male</span><br><span class="line">## where子句进行条件过滤</span><br><span class="line">update student set gender = &#x27;male&#x27; where sid = 1006;</span><br><span class="line"></span><br><span class="line">## 有默认值的字段赋值的时候可以使用default</span><br><span class="line">update student set gender = default where sid = 1008;</span><br></pre></td></tr></table></figure>

<h3 id="删除语句-delete"><a href="#删除语句-delete" class="headerlink" title="删除语句-delete"></a>删除语句-delete</h3><p><strong>单表语法：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM tbl_name</span><br><span class="line">    [WHERE where_condition]</span><br><span class="line">    [LIMIT row_count]</span><br></pre></td></tr></table></figure>

<p><strong>多表语句：– 了解</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DELETE tbl_name[.*] [, tbl_name[.*]] ...</span><br><span class="line">    FROM table_references</span><br><span class="line">    [WHERE where_condition]</span><br><span class="line"></span><br><span class="line">DELETE FROM tbl_name[.*] [, tbl_name[.*]] ...</span><br><span class="line">     USING table_references</span><br><span class="line">    [WHERE where_condition]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- 删除student表的所有数据，属于DML</span><br><span class="line">-- 自增的主键会继续递增</span><br><span class="line">-- 逐行删除</span><br><span class="line">delete from student;</span><br><span class="line"></span><br><span class="line">-- 删除表再新建一张空表，属于DDL</span><br><span class="line">-- 自增的主键还原成初始值</span><br><span class="line">truncate table student;</span><br><span class="line"></span><br><span class="line">-- 使用where过滤指定的数据</span><br><span class="line">delete from student where sid = 1009;</span><br><span class="line"></span><br><span class="line">-- 删除student表的所有数据</span><br><span class="line">delete student.*</span><br><span class="line">    from student;</span><br><span class="line">		</span><br><span class="line">-- 删除多张表</span><br><span class="line">-- 92语法： using后面多张表使用逗号</span><br><span class="line">delete from db01.student,db01.student01 using student,student01;</span><br></pre></td></tr></table></figure>

<h2 id="表关系"><a href="#表关系" class="headerlink" title="表关系"></a>表关系</h2><ul>
<li><p>一对一： 一张表中的一行数据只会对应另外一张表的一行数据</p>
<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/image-20220401095533764.png" alt="image-20220401095533764"></p>
</li>
<li><p>一对多&#x2F;多对一：一张表中一行数据对应另外一张表中的多行数据</p>
<ul>
<li><p>比如班级和学生、员工和部门</p>
<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/image-20220401100428723.png" alt="image-20220401100428723"></p>
<p>以上设计的表有问题：</p>
<ol>
<li>部门数据冗余的，浪费空间</li>
<li>如果现在部门名称发生变更，那么以上表中的数据就要将该部门的所有员工数据进行更新，效率也不高</li>
</ol>
<p>所以我们需要将以上的表进行拆分，以上的表是一对多&#x2F;多对一的关系，所以我们拆成两张表：</p>
<p><strong>拆分规则：</strong></p>
<ol>
<li>将一的方拆成一张表（部门表）</li>
<li>将多的一方也拆成一张表（员工表）</li>
<li>多的一方添加外键，引用少的一方的主键字段</li>
</ol>
<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/image-20220401101117777-16487790832141.png" alt="image-20220401101117777"></p>
</li>
</ul>
</li>
<li><p>多对多：表1中一行数据对应表2中的多行数据，表2中一行数据对应表1中的多行数据</p>
<ul>
<li><p>学生和老师或者学生和科目</p>
<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/image-20220401101951654.png" alt="image-20220401101951654"></p>
</li>
</ul>
</li>
</ul>
<p>以上设计的表，数据冗余了。所以需要拆表。以上表的关系是多对多的关系，所以<strong>拆分规则如下：</strong></p>
<p><strong>拆分规则：</strong></p>
<ol>
<li>将两边多的一方都拆成一张独立表（就有两张表了）</li>
<li>创建一张中间关系表，关系表中使用以上两张表的主键作为外键字段</li>
</ol>
<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/image-20220401102727436.png" alt="image-20220401102727436"></p>
<h2 id="外键约束-foreign-key"><a href="#外键约束-foreign-key" class="headerlink" title="外键约束 - foreign key"></a>外键约束 - foreign key</h2><p>外键：就是外部的键。也就是该字段的内容来自其他表。</p>
<h3 id="外键的作用"><a href="#外键的作用" class="headerlink" title="外键的作用"></a>外键的作用</h3><p>保证数据的一致性和完整性、安全性。有了外键约束后字段的数据就不能乱写了。</p>
<h3 id="一对多的外键约束"><a href="#一对多的外键约束" class="headerlink" title="一对多的外键约束"></a>一对多的外键约束</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-- 创建部门表</span><br><span class="line">create table dept(</span><br><span class="line">  did int primary key,</span><br><span class="line">	name char(10)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 创建员表</span><br><span class="line">create table emp(</span><br><span class="line"> eid int primary key,</span><br><span class="line"> name char(10),</span><br><span class="line"> age tinyint,</span><br><span class="line"> sex char(6),</span><br><span class="line"> did int,</span><br><span class="line"> -- 约束     约束名（可省）      外键     外键字段  引用  表   引用字段</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"> constraint fk_emp_dept_did foreign key (did) references dept(did)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/image-20220401110006844.png" alt="image-20220401110006844"></p>
<p><strong>父表：被外键引用的表叫做父表。</strong>（上面的部门表就是父表）</p>
<p><strong>子表：有外键的表。</strong>（上面的员工表就是子表）</p>
<h3 id="多对多关键的外键创建"><a href="#多对多关键的外键创建" class="headerlink" title="多对多关键的外键创建"></a>多对多关键的外键创建</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">-- 创建学生表</span><br><span class="line">create table t_stu(</span><br><span class="line">  sid int primary key,</span><br><span class="line">	name char(10),</span><br><span class="line">	age int,</span><br><span class="line">	sex char(10)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 创建学科表</span><br><span class="line">create table t_subject(</span><br><span class="line"> sub_id int primary key,</span><br><span class="line"> sname char(10)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 创建学生和学科的关系表</span><br><span class="line">create table t_stu_sub_rel(</span><br><span class="line"> _id int primary key,</span><br><span class="line"> sid int,</span><br><span class="line"> sub_id int,</span><br><span class="line"> foreign key (sid) references t_stu(sid),</span><br><span class="line"> foreign key (sub_id) references t_subject(sub_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="外键的注意事项"><a href="#外键的注意事项" class="headerlink" title="外键的注意事项"></a>外键的注意事项</h3><ul>
<li>外键引用表中的引用字段必须具备<strong>唯一性</strong></li>
<li>外键字段和引用字段的<strong>数据类型要一致</strong>，数值类型<strong>长度和符号</strong>要一致。<strong>字符串类型长度可以不一样</strong></li>
<li>建议：外键字段和引用字段的数据类型一致，长度也一致</li>
<li>删除表，需要<strong>先删除子表，再删除父表</strong></li>
<li>父子表必须使用相同的存储引擎，不能定义为临时表。</li>
</ul>
<h2 id="DQL语句-※-※-※-※-※"><a href="#DQL语句-※-※-※-※-※" class="headerlink" title="DQL语句 ※ ※ ※ ※ ※"></a>DQL语句 ※ ※ ※ ※ ※</h2><p>DML语句操作会修改原始数据；返回的是多少行受影响。</p>
<p>DQL语句不会修改原始数据；返回的是查询到的结果集，是一张虚拟表。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">    [ALL | DISTINCT ]</span><br><span class="line">    select_expr [, select_expr] ...</span><br><span class="line">    [FROM table_references]</span><br><span class="line">    [WHERE where_condition]</span><br><span class="line">    [GROUP BY &#123;col_name&#125;</span><br><span class="line">    [HAVING where_condition]</span><br><span class="line">    [ORDER BY &#123;col_name&#125;</span><br><span class="line">      [ASC | DESC], ...]</span><br><span class="line">    [LIMIT &#123;[offset,] row_count | row_count OFFSET offset&#125;]</span><br><span class="line">    [FOR UPDATE]</span><br></pre></td></tr></table></figure>

<h3 id="单表查询"><a href="#单表查询" class="headerlink" title="单表查询"></a>单表查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- 查询student表的所有数据</span><br><span class="line">-- select 返回的是虚拟表，数据在内存中</span><br><span class="line">-- select 后面跟的字段叫做投影(project)字段</span><br><span class="line">-- 投影字段：也就是虚拟表中需要显示的字段</span><br><span class="line">-- * 表示所有的字段，也就是投影所有的字段</span><br><span class="line">select * from student;</span><br><span class="line">-- 下面的语句表示只投影nane和gender</span><br><span class="line">-- 虽然只投影了nane和gender，但是其他的所有字段也在内存中</span><br><span class="line">select name,gender from student;</span><br><span class="line"></span><br><span class="line">-- 查找性别是male的学生的名字和性别</span><br><span class="line">select name,gender from student where gender =&#x27;male&#x27;;</span><br><span class="line"></span><br><span class="line">-- select语句不会修改原始数据</span><br><span class="line">select sid+1000,name,gender from student;</span><br></pre></td></tr></table></figure>

<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/image-20220401114338165.png" alt="image-20220401114338165"></p>
<h2 id="单行函数和操作符"><a href="#单行函数和操作符" class="headerlink" title="单行函数和操作符"></a>单行函数和操作符</h2><h3 id="比较函数和操作符"><a href="#比较函数和操作符" class="headerlink" title="比较函数和操作符"></a>比较函数和操作符</h3><table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">&gt;</td>
<td align="left">大于运算符</td>
</tr>
<tr>
<td align="left">&gt;&#x3D;</td>
<td align="left">大于或等于运算符</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_less-than"><code>&lt;</code></a></td>
<td align="left">小于运算符</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_not-equal"><code>&lt;&gt;</code>,<code>!=</code></a></td>
<td align="left">不等于运算符</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_less-than-or-equal"><code>&lt;=</code></a></td>
<td align="left">小于或等于运算符</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_equal-to"><code>&lt;=&gt;</code></a></td>
<td align="left">NULL 安全等于运算符</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_equal"><code>=</code></a></td>
<td align="left">等号运算符</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_between"><code>BETWEEN ... AND ...</code></a></td>
<td align="left">一个值是否在一个值范围内</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_in"><code>IN()</code></a></td>
<td align="left">一个值是否在一组值内</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_is-not-null"><code>IS NOT NULL</code></a></td>
<td align="left">NOT NULL 值测试</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_is-null"><code>IS NULL</code></a></td>
<td align="left">空值测试</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#function_isnull"><code>ISNULL()</code></a></td>
<td align="left">测试参数是否为 NULL</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/string-comparison-functions.html#operator_like"><code>LIKE</code></a></td>
<td align="left">简单的模式匹配</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_not-between"><code>NOT BETWEEN ... AND ...</code></a></td>
<td align="left">值是否不在值范围内</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_not-in"><code>NOT IN()</code></a></td>
<td align="left">一个值是否不在一组值内</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/string-comparison-functions.html#operator_not-like"><code>NOT LIKE</code></a></td>
<td align="left">简单模式匹配的否定</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/string-comparison-functions.html#function_strcmp"><code>STRCMP()</code></a></td>
<td align="left">比较两个字符串</td>
</tr>
</tbody></table>
<p>在MySQL中可以使用<code>&lt;&gt;</code>和<code>!=</code>表示不等于。但是!&#x3D;是编程语言中使用的，MySQL兼容了。真正MySQL的不等于是&lt;&gt;。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 查询表示四川省的学生信息</span><br><span class="line">select * from student where province != &quot;四川省&quot;;</span><br><span class="line">select * from student where province &lt;&gt; &quot;四川省&quot;;</span><br></pre></td></tr></table></figure>

<p>&lt;&#x3D;&gt;null安全等于操作符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 查询省份是null的学生信息</span><br><span class="line">-- 判断null不能使用=</span><br><span class="line">-- &lt;=&gt;是MySQL的SQL方言</span><br><span class="line">select * from student where province &lt;=&gt; null;</span><br><span class="line"></span><br><span class="line">-- 查询省份是null的学生信息</span><br><span class="line">select * from student where province is null;</span><br><span class="line"></span><br><span class="line">-- 查询省份不是null的学生信息</span><br><span class="line">select * from student where province is not null;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">-- 查询年龄大于等于22小于等于25的学生信息</span><br><span class="line">-- between 22 and 25 : 于等于22小于等于25</span><br><span class="line">select * from student where age between 22 and 25;</span><br><span class="line"></span><br><span class="line">-- 查询年龄是21，23，25的学生信息</span><br><span class="line">-- age in(21,23,25) 表示age是否等于()中的任何一个值</span><br><span class="line">select * from student where age in(21,23,25);</span><br><span class="line"></span><br><span class="line">-- where后面的表达式结果是boolean</span><br><span class="line">-- 查询age是null的信息</span><br><span class="line">select * from student where isnull(age);</span><br><span class="line"></span><br><span class="line">-- 查询姓张的学生</span><br><span class="line">-- like 模糊查询</span><br><span class="line">-- %表示0到多个字符</span><br><span class="line">-- _表示1个字符</span><br><span class="line">select * from student where name like &#x27;张%&#x27;;</span><br><span class="line"></span><br><span class="line">-- 查询名字是张x的学生</span><br><span class="line">select * from student where name like &#x27;张_&#x27;;</span><br><span class="line"></span><br><span class="line">-- 查询姓名中包含张的学生信息</span><br><span class="line">-- 注意：%或者_在最前面，索引就会失效</span><br><span class="line">select * from student where name like &#x27;%张%&#x27;;</span><br><span class="line"></span><br><span class="line">-- 查询姓名以%开头的student</span><br><span class="line">-- \ 转义</span><br><span class="line">select * from student where name like &#x27;\%%&#x27;;</span><br><span class="line"></span><br><span class="line">-- 默认的转义字符是\ </span><br><span class="line">-- escape &#x27;#&#x27; 表示#是转义字符</span><br><span class="line">select * from student where name like &#x27;#%%&#x27; escape &#x27;#&#x27;;</span><br><span class="line"></span><br><span class="line">-- 比较两个字符串</span><br><span class="line">-- 0 表示相等</span><br><span class="line">-- -1 表示小于</span><br><span class="line">-- 1 表示大于</span><br><span class="line">select strcmp(&quot;java&quot;,&quot;java&quot;); -- 0</span><br><span class="line">select strcmp(&quot;hello&quot;,&quot;java&quot;); -- -1</span><br><span class="line">select strcmp(&quot;zero&quot;,&quot;hello&quot;); -- 1</span><br></pre></td></tr></table></figure>

<h3 id="逻辑操作符"><a href="#逻辑操作符" class="headerlink" title="逻辑操作符"></a>逻辑操作符</h3><table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/logical-operators.html#operator_and"><code>AND</code>,<code>&amp;&amp;</code></a></td>
<td align="left">逻辑与</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/logical-operators.html#operator_not"><code>NOT</code>,<code>!</code></a></td>
<td align="left">否定价值</td>
</tr>
<tr>
<td align="left">[<code>OR</code>,&#96;</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/logical-operators.html#operator_xor"><code>XOR</code></a></td>
<td align="left">逻辑异或</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-- 查询年龄大于等于22小于等于25的学生信息</span><br><span class="line">select * from student where age &gt;= 22 and age &lt;= 25;</span><br><span class="line">select * from student where age &gt;= 22 &amp;&amp; age &lt;= 25;</span><br><span class="line"></span><br><span class="line">-- 查询年龄等于22或者等于25的学生信息</span><br><span class="line">select * from student where age = 22 or age = 25;</span><br><span class="line">select * from student where age = 22 || age = 25;</span><br><span class="line"></span><br><span class="line">-- 查询姓名不姓张的学生信息</span><br><span class="line">select * from student where name not like &#x27;张%&#x27;;</span><br><span class="line"></span><br><span class="line">-- 查询四川或重庆的女生</span><br><span class="line">-- and和or同时存在，and的优先级高</span><br><span class="line">select * from student where (province = &#x27;四川省&#x27; or province = &#x27;重庆市&#x27;) and gender = &#x27;female&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>XOR逻辑异或</strong>：如果任意一个操作数为NULL，则返回NULL。非空的操作数，相同为假，不同为真</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT 1 XOR 1;</span><br><span class="line">        -&gt; 0</span><br><span class="line">mysql&gt; SELECT 1 XOR 0;</span><br><span class="line">        -&gt; 1</span><br><span class="line">mysql&gt; SELECT 1 XOR NULL;</span><br><span class="line">        -&gt; NULL</span><br><span class="line">mysql&gt; SELECT 1 XOR 1 XOR 1;</span><br><span class="line">        -&gt; 1</span><br><span class="line">        </span><br><span class="line">-- 逻辑运算符连接的是boolean值</span><br><span class="line">-- 非0 都表示真</span><br><span class="line">SELECT 2 XOR 1 XOR 1; -- 1</span><br></pre></td></tr></table></figure>

<h3 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h3><table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/assignment-operators.html#operator_assign-value"><code>:=</code></a></td>
<td align="left">赋值</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/assignment-operators.html#operator_assign-equal"><code>=</code></a></td>
<td align="left">赋值（作为 <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/set-variable.html"><code>SET</code></a> 语句的一部分，或作为UPDATE语句中<code>SET</code>子句的 一部分）</td>
</tr>
</tbody></table>
<p>&#x3D;号可以用作比较运算符，还可以作为赋值运算符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 赋值运算符</span><br><span class="line">set time_zone = &quot;-08:00&quot;;</span><br><span class="line">update student set name = &quot;不知道&quot;;</span><br><span class="line"></span><br><span class="line">-- 与=不同，:= 运算符永远不会被解释为比较运算符</span><br><span class="line">set time_zone := &quot;+08:00&quot;;</span><br></pre></td></tr></table></figure>

<h3 id="算术操作符"><a href="#算术操作符" class="headerlink" title="算术操作符"></a>算术操作符</h3><table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>%</code>,<code>MOD</code></td>
<td align="left">模运算符</td>
</tr>
<tr>
<td align="left"><code>*</code></td>
<td align="left">乘法运算符</td>
</tr>
<tr>
<td align="left"><code>+</code></td>
<td align="left">加法运算符</td>
</tr>
<tr>
<td align="left"><code>-</code></td>
<td align="left">减号运算符</td>
</tr>
<tr>
<td align="left"><code>-</code></td>
<td align="left">更改参数的符号</td>
</tr>
<tr>
<td align="left"><code>/</code></td>
<td align="left">除法运算符</td>
</tr>
<tr>
<td align="left"><code>DIV</code></td>
<td align="left">整数除法</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">-- mysql中+用于数字计算，不能用于字符串拼接</span><br><span class="line">-- 字符串做运算，会将字符串转成数字相加</span><br><span class="line">-- 字符串不是数值类型，就不能转具体的数字，就会转成0</span><br><span class="line">-- true表示1，false表示0</span><br><span class="line">-- null和任何数做运算都是null</span><br><span class="line">select &quot;1&quot;+&quot;2&quot;; -- 3</span><br><span class="line">select &quot;1&quot; + 2; -- 3</span><br><span class="line">select &quot;a&quot; + 2; -- 2</span><br><span class="line">select &quot;a&quot; + &quot;b&quot;; -- 0</span><br><span class="line">select true + 2; -- 3</span><br><span class="line">select false + 2; -- 2</span><br><span class="line">select &quot;a&quot; + true; -- 1</span><br><span class="line">select null + 2; -- null</span><br><span class="line">select null + &quot;a&quot;; -- null</span><br><span class="line"></span><br><span class="line">-- mysql中除数是0，结果为null</span><br><span class="line">select 1 / 0; -- null</span><br><span class="line">select -6 / 3; -- -2.0000</span><br><span class="line">select -5 / 2; -- -2.5000</span><br><span class="line">select -5 / -2; -- 2.5000</span><br><span class="line"></span><br><span class="line">-- div 表示整除，也就是取结果的整数部分</span><br><span class="line">select -6 div 3; -- -2</span><br><span class="line">select -5 div 2; -- -2</span><br><span class="line">select -5 div -2; -- 2</span><br><span class="line"></span><br><span class="line">-- %结果的符号取决于被除数的符号</span><br><span class="line">select 1 % 0; -- null</span><br><span class="line">select 5 % 2; -- 1</span><br><span class="line">select -5 % 2; -- -1</span><br><span class="line">select -5 % -2; -- -1</span><br><span class="line">select 5 % -2; -- 1</span><br></pre></td></tr></table></figure>

<h3 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h3><ul>
<li>abs(): 绝对值函数</li>
<li>ceil():向上取整</li>
<li>floor():向下取整</li>
<li>round():四舍五入</li>
<li>power(): 指数函数</li>
<li>pi():圆周率函数</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">select abs(-110); -- 110</span><br><span class="line">select ceil(-3.11); -- -3</span><br><span class="line">select floor(-3.11); -- -4</span><br><span class="line">-- 绝对值的四舍五入加负号</span><br><span class="line">select round(-3.11); -- -3</span><br><span class="line">select round(-3.45); -- -3</span><br><span class="line">select round(-3.5); -- -4</span><br><span class="line"></span><br><span class="line">select power(2,3); -- 8</span><br><span class="line"></span><br><span class="line">select pi(); -- 3.141593</span><br></pre></td></tr></table></figure>

<h3 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h3><ul>
<li><p>case语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 类似于java中的switch</span><br><span class="line">CASE value WHEN compare_value THEN result [WHEN compare_value THEN result ...] [ELSE result] END</span><br><span class="line"></span><br><span class="line">--  类似于java中的 if...else if</span><br><span class="line">CASE WHEN condition THEN result [WHEN condition THEN result ...] [ELSE result] END</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">-- 查询学生的信息，如果是male返回帅哥，如果是female就返回美女</span><br><span class="line">select name,gender,</span><br><span class="line">    case gender</span><br><span class="line">	  when &quot;male&quot; then &quot;帅哥&quot;</span><br><span class="line">		when &quot;female&quot; then &quot;美女&quot;</span><br><span class="line">		else &quot;人渣&quot;</span><br><span class="line">		end as info</span><br><span class="line">	from student;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">-- 查询学生的信息，如果是male返回帅哥，如果是female就返回美女</span><br><span class="line">select name,gender,</span><br><span class="line">   case </span><br><span class="line">	 when gender = &quot;male&quot; then &quot;帅哥&quot;</span><br><span class="line">	 when gender = &quot;female&quot; then &quot;美女&quot;</span><br><span class="line">	 else &quot;人渣&quot;</span><br><span class="line">	 end as info</span><br><span class="line">	 from student;</span><br></pre></td></tr></table></figure>
</li>
<li><p>if语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 类似于三目运算符</span><br><span class="line">-- 如果expr1是TRUE (expr1 &lt;&gt; 0和expr1 IS NOT NULL)，则IF() 返回expr2。否则，它返回expr3.</span><br><span class="line">IF(expr1,expr2,expr3)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT IF(1&gt;2,2,3);</span><br><span class="line">        -&gt; 3</span><br><span class="line">mysql&gt; SELECT IF(1&lt;2,&#x27;yes&#x27;,&#x27;no&#x27;);</span><br><span class="line">        -&gt; &#x27;yes&#x27;</span><br><span class="line">mysql&gt; SELECT IF(STRCMP(&#x27;test&#x27;,&#x27;test1&#x27;),&#x27;no&#x27;,&#x27;yes&#x27;);</span><br><span class="line">        -&gt; &#x27;no&#x27;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ifnull语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 如果expr1不是 NULL， 则IFNULL()返回 expr1；否则返回 expr2。</span><br><span class="line">IFNULL(expr1,expr2)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT IFNULL(1,0);</span><br><span class="line">        -&gt; 1</span><br><span class="line">mysql&gt; SELECT IFNULL(NULL,10);</span><br><span class="line">        -&gt; 10</span><br><span class="line">mysql&gt; SELECT IFNULL(1/0,10);</span><br><span class="line">        -&gt; 10</span><br><span class="line">mysql&gt; SELECT IFNULL(1/0,&#x27;yes&#x27;);</span><br><span class="line">        -&gt; &#x27;yes&#x27;</span><br><span class="line">        </span><br><span class="line">-- 查询学生的省份信息，省份为null的显示成未知</span><br><span class="line">select name,ifnull(province,&#x27;未知&#x27;) from student;</span><br></pre></td></tr></table></figure>
</li>
<li><p>nullif语句 – 了解</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- Returns NULL if expr1 = expr2 is true, otherwise returns expr1.</span><br><span class="line">-- 如果expr1 = expr2，返回null，否则返回expr1</span><br><span class="line">NULLIF(expr1,expr2)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT NULLIF(1,1);</span><br><span class="line">        -&gt; NULL</span><br><span class="line">mysql&gt; SELECT NULLIF(1,2);</span><br><span class="line">        -&gt; 1</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">-- 返回字符串的长度（以字节为单位）</span><br><span class="line">select length(&quot;java&quot;); -- 4</span><br><span class="line">select length(&quot;我&quot;); -- 3</span><br><span class="line"></span><br><span class="line">-- char_length(): 返回字符数量</span><br><span class="line">select char_length(&quot;java&quot;); -- 4</span><br><span class="line">select char_length(&quot;我&quot;); -- 1</span><br><span class="line"></span><br><span class="line">-- concat()	返回连接的字符串</span><br><span class="line">select concat(name,province) from student; </span><br><span class="line"></span><br><span class="line">-- concat_ws()	返回与分隔符连接</span><br><span class="line">select concat_ws(&quot;,&quot;,name,province) from student;</span><br><span class="line"></span><br><span class="line">-- find_in_set(): 第二个参数中第一个参数的索引（位置）</span><br><span class="line">-- MySQL的索引从1开始</span><br><span class="line">select find_in_set(&quot;b&quot;,&quot;a,b,c,d&quot;); -- 2</span><br><span class="line"></span><br><span class="line">-- format(): 返回格式化为指定小数位数的数字</span><br><span class="line">-- format会四舍五入</span><br><span class="line">select format(3.1415926,3); -- 3.142</span><br><span class="line"></span><br><span class="line">-- instr()	返回子字符串第一次出现的索引</span><br><span class="line">-- 查找to在&quot;welcome to chengdu&quot;中第一次出现的索引</span><br><span class="line">select instr(&quot;welcome to chengdu&quot;,&quot;to&quot;); -- 9</span><br><span class="line"></span><br><span class="line">-- locate()	返回子字符串第一次出现的位置</span><br><span class="line">select locate(&quot;to&quot;,&quot;welcome to chengdu&quot;); -- 9</span><br><span class="line">-- 从位置10开始查找子串的索引</span><br><span class="line">select locate(&quot;to&quot;,&quot;welcome to chengdu&quot;,10); -- 0</span><br><span class="line"></span><br><span class="line">-- lcase()和lower()相同，返回小写</span><br><span class="line">select lcase(&quot;JAVA&quot;); -- java</span><br><span class="line"></span><br><span class="line">-- ucase()和upper()一样，返回大写</span><br><span class="line">select ucase(&quot;java&quot;); -- JAVA</span><br><span class="line"></span><br><span class="line">-- substr(str,pos,len): 返回指定的子字符串</span><br><span class="line">select substr(&quot;welcome&quot;,1,3); -- wel</span><br><span class="line">select substring(&quot;welcome&quot;,1,3);-- wel</span><br><span class="line"></span><br><span class="line">-- trim()：删除前后空格</span><br><span class="line">select trim(&quot;     hello &quot;);</span><br><span class="line">select &quot;    hello &quot;;</span><br></pre></td></tr></table></figure>

<h3 id="日期时间函数"><a href="#日期时间函数" class="headerlink" title="日期时间函数"></a>日期时间函数</h3><p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html">https://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">-- CURRENT_DATE(),CURRENT_DATE,CURDATE():返回当前日期</span><br><span class="line">select current_date();</span><br><span class="line">select current_date;</span><br><span class="line">select curdate();</span><br><span class="line"></span><br><span class="line">-- CURRENT_TIME(),CURRENT_TIME,CURTIME():返回当前时间</span><br><span class="line">select current_time();</span><br><span class="line">select concat_ws(&quot; &quot;,current_date(),current_time()) as time;</span><br><span class="line"></span><br><span class="line">-- CURRENT_TIMESTAMP(),CURRENT_TIMESTAMP,NOW():返回当前日期时间</span><br><span class="line">select current_timestamp();</span><br><span class="line">select now();</span><br><span class="line"></span><br><span class="line">-- ADDDATE(): 将时间值（间隔）添加到日期值</span><br><span class="line">-- 2天后</span><br><span class="line">select adddate(now(),2);</span><br><span class="line"></span><br><span class="line">-- 2天前</span><br><span class="line">select adddate(now(),interval -2 day);</span><br><span class="line">-- 2天后</span><br><span class="line">select adddate(now(),interval 2 day);</span><br><span class="line">-- 2年后</span><br><span class="line">select adddate(now(),interval 2 year);</span><br><span class="line">-- 2小时后</span><br><span class="line">select adddate(now(),interval 2 hour);</span><br><span class="line">-- 2分钟后</span><br><span class="line">select adddate(now(),interval 2 minute);</span><br><span class="line"></span><br><span class="line">-- ADDTIME(): 添加时间</span><br><span class="line">-- ADDTIME()将expr2添加到expr1并返回结果。</span><br><span class="line">-- 其中，Expr1为时间或datetime表达式，expr2为时间表达式。</span><br><span class="line">select addtime(now(),&#x27;2:10&#x27;);</span><br><span class="line"></span><br><span class="line">-- DATE(): 提取日期或日期时间表达式的日期部分</span><br><span class="line">select date(now());</span><br><span class="line">select date(create_time) from student;</span><br><span class="line"></span><br><span class="line">-- DATE_ADD()	将时间值（间隔）添加到日期值</span><br><span class="line">-- DATE_SUB()：从日期中减去时间值（间隔）</span><br><span class="line">select date_add(now(),interval 2 day);</span><br><span class="line"></span><br><span class="line">-- DATE_FORMAT(date,format): 日期格式化</span><br><span class="line">select date_format(now(),&quot;%Y年%m月%d日 %H:%i:%s&quot;)</span><br><span class="line"></span><br><span class="line">-- DATEDIFF():	两个日期之差</span><br><span class="line">select datediff(now(),&#x27;1990-10-10&#x27;);</span><br><span class="line"></span><br><span class="line">-- DAY(),DAYOFMONTH() 的同义词,返回月中的天</span><br><span class="line">select day(now());</span><br><span class="line">-- DAYNAME()	返回工作日的名称,返回星期的名字</span><br><span class="line">select dayname(now());</span><br><span class="line"></span><br><span class="line">-- DAYOFWEEK()	返回参数的工作日索引</span><br><span class="line">-- 周日是第一天</span><br><span class="line">select dayofweek(now());</span><br><span class="line"></span><br><span class="line">-- EXTRACT(unit from date)：提取日期的一部分</span><br><span class="line">select extract(year from now());</span><br><span class="line"></span><br><span class="line">-- QUARTER()	从日期参数返回季度</span><br><span class="line">select quarter(now());</span><br></pre></td></tr></table></figure>

<h3 id="转换函数-了解"><a href="#转换函数-了解" class="headerlink" title="转换函数 - 了解"></a>转换函数 - 了解</h3><ul>
<li><code>CAST(expr AS </code>type<code>)</code><ul>
<li>*允许的<code>type</code>*类型<ul>
<li>BINARY[(<em><code>N</code></em>)]</li>
<li>CHAR[(<em><code>N</code></em>)]</li>
<li>DATE</li>
<li>DATETIME[(<em><code>M</code></em>)]</li>
<li>DECIMAL[(<em><code>M</code></em>[,<em><code>D</code></em>])]</li>
<li>TIME[(<em><code>M</code></em>)]</li>
<li>SIGNED [INTEGER]</li>
<li>UNSIGNED [INTEGER]</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- cast 转换函数</span><br><span class="line">select locate(&#x27;0&#x27;,cast(110 as char));</span><br></pre></td></tr></table></figure>

<h3 id="位运算-了解"><a href="#位运算-了解" class="headerlink" title="位运算 - 了解"></a>位运算 - 了解</h3><table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/bit-functions.html#operator_bitwise-and"><code>&amp;</code></a></td>
<td align="left">按位与</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/bit-functions.html#operator_right-shift"><code>&gt;&gt;</code></a></td>
<td align="left">右移</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/bit-functions.html#operator_left-shift"><code>&lt;&lt;</code></a></td>
<td align="left">左移</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/bit-functions.html#operator_bitwise-xor"><code>^</code></a></td>
<td align="left">按位异或</td>
</tr>
<tr>
<td align="left">[&#96;</td>
<td align="left">&#96;](<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/bit-functions.html#operator_bitwise-or">https://dev.mysql.com/doc/refman/5.7/en/bit-functions.html#operator_bitwise-or</a>)</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/bit-functions.html#operator_bitwise-invert"><code>~</code></a></td>
<td align="left">位反转</td>
</tr>
</tbody></table>
<h3 id="加密函数"><a href="#加密函数" class="headerlink" title="加密函数"></a>加密函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- md5加密</span><br><span class="line">select md5(111);</span><br><span class="line">-- password()	计算并返回密码字符串</span><br><span class="line">select password(123456);-- *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9</span><br></pre></td></tr></table></figure>

<h3 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- INET_ATON()：返回 IP 地址的数值</span><br><span class="line">-- ATON  Address To Number</span><br><span class="line"> SELECT INET_ATON(&#x27;10.0.5.9&#x27;); -- 167773449</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">-- INET_NTOA():	从数值返回 IP 地址</span><br><span class="line">-- NTOA   Number To Address</span><br><span class="line">SELECT INET_NTOA(167773449);-- 10.0.5.9</span><br></pre></td></tr></table></figure>

<h3 id="信息函数"><a href="#信息函数" class="headerlink" title="信息函数"></a>信息函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- DATABASE()	返回默认（当前）数据库名称</span><br><span class="line">select database();</span><br><span class="line"></span><br><span class="line">-- VERSION()	返回一个表示 MySQL 服务器版本的字符串</span><br><span class="line">select version();</span><br><span class="line"></span><br><span class="line">-- USER()	客户端提供的用户名和主机名</span><br><span class="line">select user(); -- root@localhost</span><br></pre></td></tr></table></figure>

<h2 id="单行函数的特点"><a href="#单行函数的特点" class="headerlink" title="单行函数的特点"></a>单行函数的特点</h2><ul>
<li>以上所讲的函数都是单行函数，也就是以上的函数会<strong>作用在表中每一行数据，一行数据返回一个结果。</strong></li>
<li>单行函数<strong>可以在select或where后面</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select name,char_length(name) from student;</span><br><span class="line">select name from student where char_length(name) = 3;</span><br></pre></td></tr></table></figure>

<h2 id="order-by子句"><a href="#order-by子句" class="headerlink" title="order by子句"></a>order by子句</h2><p>order by …  按照 … 排序</p>
<p>ascend:(默认)  升序</p>
<p>descend： 降序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- student按照年龄升序</span><br><span class="line">select * from student order by age;</span><br><span class="line">select * from student order by age asc;</span><br><span class="line"></span><br><span class="line">-- student按照年龄降序</span><br><span class="line">select * from student order by age desc;</span><br><span class="line"></span><br><span class="line">-- student按照sid降序，年龄升序</span><br><span class="line">-- age升序的前提是sid相同</span><br><span class="line">select * from student order by sid desc , age asc;</span><br></pre></td></tr></table></figure>

<h2 id="limit-子句"><a href="#limit-子句" class="headerlink" title="limit 子句"></a>limit 子句</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- offset 表示偏移量，跳过多少条数据，省略不写就是0</span><br><span class="line">-- row_count 行数</span><br><span class="line">LIMIT &#123;[offset,] row_count&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- 按照学生的age降序，取出前3条</span><br><span class="line">select * from student order by age desc limit 3;</span><br><span class="line"></span><br><span class="line">-- 按照学生的age降序，从第2条开始获取3条数据</span><br><span class="line">select * from student order by age desc limit 1,3;</span><br><span class="line"></span><br><span class="line">-- 分页查询</span><br><span class="line">-- 一共8条数据</span><br><span class="line">-- 每页显示3条，分页显示</span><br><span class="line">-- limit (页码 - 1) * 每页需要显示的条数 ,每页需要显示的条数</span><br><span class="line">select * from student order by age desc limit 0,3; -- 第一页</span><br><span class="line">select * from student order by age desc limit 3,3; -- 第二页</span><br><span class="line">select * from student order by age desc limit 6,3; -- 第三页</span><br></pre></td></tr></table></figure>

<h2 id="建表的时候自动更新时间"><a href="#建表的时候自动更新时间" class="headerlink" title="建表的时候自动更新时间"></a>建表的时候自动更新时间</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- 创建学生表</span><br><span class="line">create table if not exists student (</span><br><span class="line">  _id bigint primary key auto_increment,</span><br><span class="line">	sid int unsigned not null unique,</span><br><span class="line">	name varchar(12) not null,</span><br><span class="line">	age int,</span><br><span class="line">	gender char(6) default &#x27;male&#x27;,</span><br><span class="line">	province text,</span><br><span class="line">	create_time datetime default now(),</span><br><span class="line">    -- on update 表示数据更新的时候，时间也会自动更新</span><br><span class="line">	update_time datetime default now() on update now()</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- 复制表结构</span><br><span class="line">create table student01 like student;</span><br><span class="line"></span><br><span class="line">-- 复制表结构和数据</span><br><span class="line">create table student02 as select * from student;</span><br><span class="line"></span><br><span class="line">-- 将查询得到的数据插入表中</span><br><span class="line">insert into student01 select * from student;</span><br><span class="line"></span><br><span class="line">-- insert into ... select 可以做蠕虫复制</span><br><span class="line">insert into test select * from test;</span><br></pre></td></tr></table></figure>

<h2 id="group-by子句"><a href="#group-by子句" class="headerlink" title="group by子句"></a>group by子句</h2><p>group by … 按照…分组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 按照职位分组</span><br><span class="line">-- 使用分组后，select 后面的投影字段需要使用分组字段，不是分组字段作为投影没有意义</span><br><span class="line">select * from emp group by job;</span><br><span class="line"></span><br><span class="line">-- 学生按照省份和性别分组</span><br><span class="line">select province,gender from db01.student group by province,gender;</span><br><span class="line"></span><br><span class="line">-- 使用分组去重 - 小技巧</span><br><span class="line">-- 分组的目的：是为了数据的统计分析</span><br></pre></td></tr></table></figure>

<h2 id="聚合函数-多行函数-aggregate-functions"><a href="#聚合函数-多行函数-aggregate-functions" class="headerlink" title="聚合函数(多行函数) - aggregate-functions"></a>聚合函数(多行函数) - aggregate-functions</h2><ul>
<li><p>count(字段)&#x2F;count(常量值)&#x2F;count(*)： 返回返回的行数</p>
</li>
<li><p>sum(字段)：返回总和</p>
</li>
<li><p>max(): 返回最大值</p>
</li>
<li><p>min(): 返回最小值</p>
</li>
<li><p>avg():返回参数的平均值</p>
</li>
<li><p>group_concat():返回一个连接的字符串</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GROUP_CONCAT([DISTINCT] expr [,expr ...]</span><br><span class="line">             [ORDER BY &#123;unsigned_integer | col_name | expr&#125;</span><br><span class="line">                 [ASC | DESC] [,col_name ...]]</span><br><span class="line">             [SEPARATOR str_val])</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">-- 统计每个部分的员工人数</span><br><span class="line">-- count(*) 按照一行的数据进行统计，不会忽略null</span><br><span class="line">select deptno, as num from emp group by deptno;</span><br><span class="line">-- count(字段) 按照指定字段的数据进行统计，该字段的值是null会忽略null</span><br><span class="line">select deptno,count(comm) as num from emp group by deptno;</span><br><span class="line">-- count(*) 按照一行的数据进行统计，不会忽略null</span><br><span class="line">select deptno,count(0) as num from emp group by deptno;</span><br><span class="line"></span><br><span class="line">-- 统计员工总人数</span><br><span class="line">-- 没有使用group by，就是把一张表当成一个组</span><br><span class="line">select count(*) from emp;</span><br><span class="line"></span><br><span class="line">-- 统计每种职位的工资总额</span><br><span class="line">select job,sum(sal) from emp group by job;</span><br><span class="line"></span><br><span class="line">-- 统计每种职位的平均工资</span><br><span class="line">select job,format(avg(sal),2) from emp group by job;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>– 统计每种职位的平均工资<br>select job,sum(sal)&#x2F;count(sal) from emp group by job;</p>
<p>– 统计每种职位的最高工资<br>select job,max(sal) from emp group by job;</p>
<p>– 统计每种职位的最低工资<br>select job,min(sal) from emp group by job;</p>
<p>– 统计每种职位的所有工资					<br>select job,group_concat(sal order by sal desc separator ‘,’) from emp group by job;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">### 聚合函数的特点</span><br><span class="line"></span><br><span class="line">1. 聚合多行数据得到一个结果</span><br><span class="line">2. 聚合函数不能使用在where后面，只能用在select和having后面</span><br><span class="line"></span><br><span class="line">## having 子句</span><br><span class="line"></span><br><span class="line">​``` mysql</span><br><span class="line">-- 查询人数超过2人的职位有哪些</span><br><span class="line">select job,count(*) as sum from emp group by job having sum &gt; 2;</span><br><span class="line"></span><br><span class="line">-- 过滤原始数据在进入内存</span><br><span class="line">select * from emp where sal &gt; 1000;</span><br><span class="line">-- 进入内存再过滤</span><br><span class="line">select * from emp having sal &gt; 1000;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="where-和-having的区别"><a href="#where-和-having的区别" class="headerlink" title="where 和 having的区别"></a>where 和 having的区别</h2><ol>
<li>where过滤的是原始数据；having过滤的是内存数据</li>
<li>where能做的having都能做；反之不成立。但是能用where的优先使用where,可以减少加载到内存的数据</li>
<li>where后面不能使用别名和聚合函数；having可以</li>
</ol>
<h2 id="连接查询（多表查询）-SQL92"><a href="#连接查询（多表查询）-SQL92" class="headerlink" title="连接查询（多表查询）- SQL92"></a>连接查询（多表查询）- SQL92</h2><h3 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h3><ul>
<li><p>笛卡尔积：表1有m条数据，表2有n条数据，笛卡尔积就是用表1的每一条数据匹配表2中的所有数据，结果就是m*n条数据</p>
</li>
<li><p>自连接：就是一张表当成两张表使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 查询员工及其领导</span><br><span class="line">select  e1.ename,e2.ename</span><br><span class="line">    from emp as e1,emp as e2</span><br><span class="line">		-- 连接条件</span><br><span class="line">		where e1.mgr = e2.empno;</span><br></pre></td></tr></table></figure>
</li>
<li><p>等值连接：连接条件使用&#x3D;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询员工和部门名称</span><br><span class="line">select e.ename,d.dname</span><br><span class="line">   from emp e , dept d</span><br><span class="line">	 where e.deptno = d.deptno;</span><br></pre></td></tr></table></figure>
</li>
<li><p>不等值连接：连接条件没有使用&#x3D;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- 查询员工的工资等级</span><br><span class="line">select e.ename,e.sal,s.grade</span><br><span class="line">   from emp e, salgrade s</span><br><span class="line">	 where e.sal between s.losal and s.hisal;</span><br><span class="line">	 </span><br><span class="line">	 </span><br><span class="line">-- 查询员工和部门名称、工资等级</span><br><span class="line">-- 连接条件的数量 = 连接的表数量 - 1</span><br><span class="line">select e.ename,e.sal,d.dname,s.grade</span><br><span class="line">    from emp e,dept d, salgrade s</span><br><span class="line">		where e.deptno = d.deptno and e.sal between s.losal and s.hisal;</span><br><span class="line">		</span><br><span class="line">-- 查询工资大于1000的员工和部门名称、工资等级</span><br><span class="line">select e.ename,e.sal,d.dname,s.grade</span><br><span class="line">    from emp e,dept d, salgrade s</span><br><span class="line">		where e.sal &gt; 1000 and e.deptno = d.deptno and e.sal between s.losal and s.hisal;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="内连接的特点"><a href="#内连接的特点" class="headerlink" title="内连接的特点"></a>内连接的特点</h3><ul>
<li>只会返回匹配成功的数据，没有匹配上的数据丢失了</li>
</ul>
<p>SQL92语法将连接条件放在where中，但是where还有过滤原始数据的功能，所以代码耦合了。所以出现了sql99语法，在SQL99中将连接条件独立出来了。</p>
<h2 id="连接查询（多表查询）-SQL99"><a href="#连接查询（多表查询）-SQL99" class="headerlink" title="连接查询（多表查询）- SQL99"></a>连接查询（多表查询）- SQL99</h2><h3 id="内连接-inner-join"><a href="#内连接-inner-join" class="headerlink" title="内连接 - inner join"></a>内连接 - inner join</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">-- 查询员工及其领导 -- 自连接</span><br><span class="line">select  e1.ename as emp,e2.ename as leader</span><br><span class="line">   from emp e1 </span><br><span class="line">   join emp e2</span><br><span class="line">	 on e1.mgr = e2.empno;</span><br><span class="line"></span><br><span class="line">-- 查询员工和部门名称 -- 等值连接</span><br><span class="line">-- inner可以省略</span><br><span class="line">select e.ename,d.dname</span><br><span class="line">    from emp e inner join dept d</span><br><span class="line">		on e.deptno = d.deptno;</span><br><span class="line"></span><br><span class="line">-- 查询工资大于1000的员工和部门名称、工资等级</span><br><span class="line">select e.ename,e.sal,d.dname,s.grade</span><br><span class="line">   from emp e join dept d</span><br><span class="line">	 -- 连接条件</span><br><span class="line">	 on e.deptno  = d.deptno</span><br><span class="line">	 join salgrade s</span><br><span class="line">	 -- 连接条件</span><br><span class="line">	 on e.sal between s.losal and s.hisal</span><br><span class="line">	 -- 过滤条件</span><br><span class="line">	 where e.sal &gt; 1000 ;</span><br></pre></td></tr></table></figure>

<p><strong>内连接：只会返回匹配成功的数据，没有匹配上的数据丢失了</strong></p>
<h3 id="外连接-outer-join"><a href="#外连接-outer-join" class="headerlink" title="外连接 - outer join"></a>外连接 - outer join</h3><blockquote>
<p>外连接区分主表和从表</p>
<p>特点：主表的数据无论匹配是否成功都会显示，从表的数据匹配成功就显示数据，否则就是null</p>
<p> left join 左边的表就是主表，右边的表就是从表</p>
<p> right join 右边的表就是主表，左边的表就是从表</p>
<p>所以基于以上的规则：left join  和  right join  通过交换主从表的关系可以达到一样的效果</p>
</blockquote>
<h4 id="左外连接-left-join"><a href="#左外连接-left-join" class="headerlink" title="左外连接 - left join"></a>左外连接 - left join</h4><h4 id="右外连接-–-right-join"><a href="#右外连接-–-right-join" class="headerlink" title="右外连接 – right join"></a>右外连接 – right join</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-- 查询所有员工及其领导，没有领导的员工也要显示</span><br><span class="line">select e1.ename,e2.ename</span><br><span class="line">  -- e1是主表，e2是从表</span><br><span class="line">  from emp e1 left join emp e2</span><br><span class="line">	on e1.mgr = e2.empno;</span><br><span class="line">	</span><br><span class="line">select e1.ename,e2.ename</span><br><span class="line">  -- e1是主表，e2是从表</span><br><span class="line">  from emp e2 right join emp e1</span><br><span class="line">	on e1.mgr = e2.empno;</span><br><span class="line">	</span><br><span class="line">-- 查询工资大于1000的员工和部门名称、工资等级</span><br><span class="line">select e.ename,e.sal,d.dname,s.grade</span><br><span class="line">   from emp e left join dept d</span><br><span class="line">	 -- 连接条件</span><br><span class="line">	 on e.deptno  = d.deptno</span><br><span class="line">	 left join salgrade s</span><br><span class="line">	 -- 连接条件</span><br><span class="line">	 on e.sal between s.losal and s.hisal</span><br><span class="line">	 -- 过滤条件</span><br><span class="line">	 where e.sal &gt; 1000 ;</span><br></pre></td></tr></table></figure>

<h3 id="交叉连接、自然连接、using子句"><a href="#交叉连接、自然连接、using子句" class="headerlink" title="交叉连接、自然连接、using子句"></a>交叉连接、自然连接、using子句</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-- 交叉连接</span><br><span class="line">-- 一般使用交叉连接得到笛卡尔积的结果</span><br><span class="line">select e.*,d.*</span><br><span class="line"> from emp e cross join dept d;</span><br><span class="line"></span><br><span class="line">-- 自然连接</span><br><span class="line">-- Natural join基于两个表中的全部同名列建立连接</span><br><span class="line">-- 弊端：连接条件不灵活</span><br><span class="line">select e.*,d.*</span><br><span class="line"> from emp e natural join dept d;</span><br><span class="line"> </span><br><span class="line"> -- using子句</span><br><span class="line"> -- 如果连接条件的字段名一样，可以使用using子句</span><br><span class="line">select e.ename,d.dname</span><br><span class="line">    from emp e inner join dept d</span><br><span class="line">		using(deptno);</span><br><span class="line"></span><br><span class="line">select e.ename,d.dname</span><br><span class="line">    from emp e inner join dept d</span><br><span class="line">		on e.deptno = d.deptno;</span><br></pre></td></tr></table></figure>

<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p>子查询：就是其他语句中包含的select语句</p>
<blockquote>
<p>注意：</p>
<p>1.子查询必须写在（）内</p>
<p>2.子查询在from后面当作表使用，必须有别名</p>
</blockquote>
<h3 id="单行子查询"><a href="#单行子查询" class="headerlink" title="单行子查询"></a>单行子查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-- 查得所有比“CLARK”工资高的员工的信息</span><br><span class="line">-- 1. 查询“CLARK”工资</span><br><span class="line">select sal from emp where ename = &#x27;CLARK&#x27;;</span><br><span class="line">-- 2. 查询所有员工的工资和1中的结果比较</span><br><span class="line">select ename,sal from emp where sal &gt; (select sal from emp where ename = &#x27;CLARK&#x27;);</span><br><span class="line"></span><br><span class="line">-- 查询工资最高的雇员名字和工资。</span><br><span class="line">-- 1. 查询最高工资</span><br><span class="line">select max(sal) from emp;</span><br><span class="line">-- 2. 查询所有员工的工资等于1的结果的</span><br><span class="line">select * from emp where sal = (select max(sal) from emp);</span><br><span class="line"></span><br><span class="line">-- 查询职务和SCOTT相同，比SCOTT雇佣时间早的雇员信息</span><br><span class="line">-- 1. 查询出SCOTT的职务</span><br><span class="line">select job from emp where ename = &quot;SCOTT&quot;;</span><br><span class="line">-- 2. 查询出SCOTT的雇佣时间</span><br><span class="line">select hiredate from emp where ename = &quot;SCOTT&quot;;</span><br><span class="line">-- 3. 查询所有员工职务等于1的结果，雇佣时间小于2的结果</span><br><span class="line">select * from emp where job = (select job from emp where ename = &quot;SCOTT&quot;)</span><br><span class="line">and hiredate &lt; (select hiredate from emp where ename = &quot;SCOTT&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="多行子查询"><a href="#多行子查询" class="headerlink" title="多行子查询"></a>多行子查询</h3><p>多行子查询返回多行记录</p>
<p>对多行子查询只能使用多行记录比较运算符</p>
<p>ALL 和子查询返回的所有值比较</p>
<p>ANY 和子查询返回的任意一个值比较; SOME是ANY的别名</p>
<p>IN 等于列表中的任何一个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">-- 查询工资低于任意一个&#x27;CLERK&#x27;的工资的雇员信息。</span><br><span class="line">-- 1. 查询出所有&#x27;CLERK&#x27;的工资</span><br><span class="line">select sal from emp where job = &#x27;CLERK&#x27;;</span><br><span class="line">-- 2. 查询所有员工的工资低于1中任意一个值</span><br><span class="line">select * from emp where sal &lt;any (select sal from emp where job = &#x27;CLERK&#x27;);</span><br><span class="line"></span><br><span class="line">-- 查询工资低于任意一个&#x27;CLERK&#x27;的工资的雇员信息。</span><br><span class="line">select * from emp where sal &lt; (select max(sal) from emp where job = &#x27;CLERK&#x27;);</span><br><span class="line"></span><br><span class="line">-- 查询工资比所有的 &#x27;SALESMAN&#x27;都高的雇员的编号、名字和工资。</span><br><span class="line">-- 1. 查询出所有&#x27;SALESMAN&#x27;的工资</span><br><span class="line">select sal from emp where job = &#x27;SALESMAN&#x27;;</span><br><span class="line">-- 2. 查询所有员工的工资高于1中所有值</span><br><span class="line">select * from emp where sal &gt;all(select sal from emp where job = &#x27;SALESMAN&#x27;);</span><br><span class="line"></span><br><span class="line">-- 查询部门20中职务同部门10的雇员一样的雇员信息。</span><br><span class="line">-- 1.查询部门10中职务有哪些</span><br><span class="line">select job from emp where deptno = 10;</span><br><span class="line">-- 2.查询部门20中职务在1的结果中的</span><br><span class="line">select * from emp where deptno = 20 and job in (select job from emp where deptno = 10);</span><br><span class="line"></span><br><span class="line">-- 查询在雇员中有哪些人是领导</span><br><span class="line">-- 1. 查询出领导的员工编号</span><br><span class="line">select mgr from emp;</span><br><span class="line">-- 2. 查询员工的编号在1的结果中的</span><br><span class="line">select * from emp where empno in (select mgr from emp);</span><br><span class="line"></span><br><span class="line">-- 找出部门编号为20的所有员工中收入最高的职员</span><br><span class="line">-- 1. 查询部门编号为20的所有员工最高工资</span><br><span class="line">select max(sal) from emp where deptno = 20;</span><br><span class="line">-- 2. 查询部门编号为20的所有员工工资等于1的结果的</span><br><span class="line">select * from emp where deptno = 20 and sal = (select max(sal) from emp where deptno = 20);</span><br><span class="line"></span><br><span class="line">-- 找出部门编号为20的所有员工中收入最高的职员</span><br><span class="line">select * from emp</span><br><span class="line">where sal &gt;= all(</span><br><span class="line">		select sal from emp where deptno = 20)</span><br><span class="line">and deptno = 20</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 查询每个部门平均薪水的等级</span><br><span class="line">-- 1. 查询每个部门平均薪水</span><br><span class="line">select avg(sal) from emp group by deptno;</span><br><span class="line">-- 2. 将1的结果和工资等级进行连接查询</span><br><span class="line">select e.avg,s.grade</span><br><span class="line">-- 子查询在from后面当作表使用，必须有别名</span><br><span class="line">  from (select avg(sal) as avg from emp group by deptno) e</span><br><span class="line">  join salgrade s</span><br><span class="line">	on  e.avg between s.losal and s.hisal;</span><br></pre></td></tr></table></figure>

<h3 id="相关子查询"><a href="#相关子查询" class="headerlink" title="相关子查询"></a>相关子查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- exists(select语句)： 相关子查询</span><br><span class="line">-- 外部的查询是否返回数据取决于 select子查询语句</span><br><span class="line">-- select子查询语句有结果，外部查询就会执行返回结果；否则外部查询没有返回结果</span><br><span class="line">-- 最终的结果只有外部查询的，内部查询的</span><br><span class="line">-- 内部查询在这里仅仅是一个开关</span><br><span class="line">select * from emp where exists (select * from emp where sal = 10000);</span><br></pre></td></tr></table></figure>

<h2 id="视图-View"><a href="#视图-View" class="headerlink" title="视图 - View"></a>视图 - View</h2><p>视图是从若干基本表和（或）其他视图构造出来的表。也就是说视图也是表，是一张虚拟表。</p>
<p><strong>操作视图的数据其实还是操作的是基本表的数据</strong></p>
<h3 id="创建视图"><a href="#创建视图" class="headerlink" title="创建视图"></a>创建视图</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE</span><br><span class="line">    [OR REPLACE]</span><br><span class="line">    VIEW view_name [(column_list)]</span><br><span class="line">    AS select_statement</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">-- 创建视图</span><br><span class="line">create view emp_view as select empno,ename,job,mgr,hiredate,deptno from emp;</span><br><span class="line"></span><br><span class="line">-- 如果不存在就创建；存在就替换</span><br><span class="line">create or replace view emp_view as select empno,ename,job,mgr,deptno from emp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 操作视图其实操作的是原始数据</span><br><span class="line">update emp_view set job = &quot;SALESMAN&quot; where ename =&quot;smith&quot;;</span><br><span class="line">delete from emp where ename =&quot;smith&quot;;</span><br><span class="line"></span><br><span class="line">-- 聚合函数生成的视图不能增加、删除、修改数据</span><br><span class="line">create or replace view emp_view01 as select max(sal) as max_sal from emp;</span><br><span class="line"></span><br><span class="line">update emp_view01 set max_sal = 10000;</span><br><span class="line"></span><br><span class="line">delete from emp_view01;</span><br><span class="line"></span><br><span class="line">insert into emp_view01 values(10000);</span><br><span class="line"></span><br><span class="line">-- 删除视图</span><br><span class="line">drop view emp_view01;</span><br><span class="line"></span><br><span class="line">-- 查询当前所有的数据库</span><br><span class="line">show databases;</span><br><span class="line">-- 查询当前库下的所有表</span><br><span class="line">show tables;</span><br><span class="line">-- 查询所有表及其类型</span><br><span class="line">show full tables;</span><br><span class="line">-- 查询指定数据库的所有表</span><br><span class="line">show tables from db01;</span><br></pre></td></tr></table></figure>

<h3 id="视图的总结"><a href="#视图的总结" class="headerlink" title="视图的总结"></a>视图的总结</h3><ol>
<li>视图对应一个查询语句；视图是（从若干基本表和（或）其他视图构造出来的）表</li>
<li>视图进行查询，添加，修改，删除，其实就是对背后的表进行相应操作</li>
<li>虚表 在创建一个视图时，只是存放的视图的定义，也即是动态检索数据的查询语句，而并不存放视图对应的数据</li>
<li>视图的好处<ul>
<li>安全 可以只显示部分行部分列的数据;可以对添加的数据进行检查；可以设置为只读视图</li>
<li>操作简单 </li>
<li>只显示多个数据库表的部分列，部分行的视图</li>
<li>聚合函数生成的视图不能增加、删除、修改数据</li>
</ul>
</li>
</ol>
<h2 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW ENGINES;</span><br></pre></td></tr></table></figure>

<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/image-20220402143925195.png" alt="image-20220402143925195"></p>
<p><strong>Innodb支持事务和外键；MyISAM不支持事务和外键</strong></p>
<h2 id="MySQL事务-transaction"><a href="#MySQL事务-transaction" class="headerlink" title="MySQL事务 - transaction"></a>MySQL事务 - transaction</h2><p>事务：完成一个事情需要的一系列步骤(操作)，这些操作要么同时成功，要么同时失败</p>
<p><strong>在MySQL中DML一条语句就是一个事务，且事务自动提交的。</strong></p>
<p>在实际开发中有时候我们需要将多条语句变成一个整体，他们要么都成功，要么都是失败。此时就需要将多条语句做成一个事务。</p>
<h3 id="事务的基本操作"><a href="#事务的基本操作" class="headerlink" title="事务的基本操作"></a>事务的基本操作</h3><p>1 开启事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start transaction;</span><br></pre></td></tr></table></figure>

<p>2 提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">commit;</span><br></pre></td></tr></table></figure>

<p>3 回滚事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rollback;</span><br></pre></td></tr></table></figure>

<p>注意：一旦使用start transaction;开启事务那么自动提交将失效</p>
<p> 如果所有操作都正常执行使用commit;提交事务</p>
<p> 当发生异常情况回滚事务，数据(此时为tb_account表)通常回滚到开启事务之前的状态</p>
<h3 id="转账案例"><a href="#转账案例" class="headerlink" title="转账案例"></a>转账案例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 张三给李四转100元</span><br><span class="line">-- 开启事务</span><br><span class="line">start transaction;</span><br><span class="line">  update account set money = money - 100 where name = &#x27;zhangsan&#x27;;</span><br><span class="line">  update account set money = money + 100 where name = &#x27;lisi&#x27;;</span><br><span class="line">commit; -- 提交事务，事务结束</span><br><span class="line">rollback; -- 回滚事务，事务结束</span><br></pre></td></tr></table></figure>

<p>事务是用来控制DML语句的。DQL不会修改原始数据，所以DQL不需要事务。</p>
<h3 id="事务的ACID四大特性"><a href="#事务的ACID四大特性" class="headerlink" title="事务的ACID四大特性"></a>事务的ACID四大特性</h3><ul>
<li>原子性(Atomicity): 事务中的语句不可再分，是一个整体。要么同时成功，要么同时失败</li>
<li>一致性(Consistency)： 事务执行前和事务执行后数据是一致的。比如转帐前总计金额是1300；转账后总计金额是1300</li>
<li>隔离性(Isolation): 事务之间是彼此隔离的，一个事务的操作不会影响另一个事务。但是隔离性受隔离级别的影响。</li>
<li>持久性(Durability)：事务一旦提交就会将数据写入文件持久化存储。</li>
</ul>
<h3 id="事务的隔离级别-理解"><a href="#事务的隔离级别-理解" class="headerlink" title="事务的隔离级别 - 理解"></a>事务的隔离级别 - 理解</h3><table>
<thead>
<tr>
<th>事务隔离级别</th>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
</tr>
</thead>
<tbody><tr>
<td>读未提交（read-uncommitted）</td>
<td>是</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>读已提交（read-committed）</td>
<td>否</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>可重复读（repeatable-read）</td>
<td>否</td>
<td>否</td>
<td>是</td>
</tr>
<tr>
<td>串行化（serializable）</td>
<td>否</td>
<td>否</td>
<td>否</td>
</tr>
</tbody></table>
<ul>
<li>读未提交（read-uncommitted）<ul>
<li>事务1修改了数据但是还没有提交，此时事务2就读取到了事务1还没有提交的数据。</li>
<li>会产生脏读。解决办法：提升隔离级别</li>
</ul>
</li>
<li>读已提交（read-committed）<ul>
<li>开启事务1和事务2，事务1和事务2读取到了表中原来的数据，此时事务1修改了表中的数据，并提交事务。事务2在同一次事务中读到了不同的数据。</li>
<li>解决了脏读，但是出现了<strong>不可重复读</strong></li>
<li>不可重复读： 就是在同一次事务中读取到的数据不相同</li>
<li>如何解决不可重复读:提升隔离级别</li>
</ul>
</li>
<li>可重复读（repeatable-read）<ul>
<li>开启事务1和事务2,无论事务1是否提及事务,事务2读取到的数据都是一样.</li>
<li>解决了不可重复读, 但是出现了<strong>幻读</strong></li>
<li>解决幻读。解决办法：提升隔离级别</li>
</ul>
</li>
<li>串行化（serializable）<ul>
<li>事务加锁了,事务只能串行执行了.</li>
<li>安全性最高,效率最低</li>
</ul>
</li>
</ul>
<p><strong>MySQL默认的隔离级别是可重复读（repeatable-read）</strong></p>
<ul>
<li><p>查询隔离级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@tx_isolation;</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置隔离级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">set session transaction isolation level  READ UNCOMMITTED;</span><br><span class="line">set session transaction isolation level  READ COMMITTED;</span><br><span class="line">set session transaction isolation level  REPEATABLE READ;</span><br><span class="line">set session transaction isolation level  serializable;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="数据库设计原则-三范式"><a href="#数据库设计原则-三范式" class="headerlink" title="数据库设计原则 - 三范式"></a>数据库设计原则 - 三范式</h2><h3 id="概念（NF-x3D-NormalForm）"><a href="#概念（NF-x3D-NormalForm）" class="headerlink" title="概念（NF&#x3D; NormalForm）"></a>概念（NF&#x3D; NormalForm）</h3><p>遵循一定的规则。在关系型数据库中这种规则就称为范式</p>
<h3 id="三范式的作用"><a href="#三范式的作用" class="headerlink" title="三范式的作用"></a>三范式的作用</h3><ul>
<li>结构合理</li>
<li>冗余较小</li>
</ul>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ul>
<li>性能降低</li>
<li>多表查询比单表查询速度慢</li>
</ul>
<h3 id="第一范式"><a href="#第一范式" class="headerlink" title="第一范式"></a>第一范式</h3><p> 必须要有主键，字段不可再分</p>
<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/image-20220402155135097.png" alt="image-20220402155135097"></p>
<p>以上的表就不满足第一范式，虽然有主键，但是address可以再分。修改如下：</p>
<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/image-20220402155327349.png" alt="image-20220402155327349"></p>
<h3 id="第二范式"><a href="#第二范式" class="headerlink" title="第二范式"></a>第二范式</h3><p>在第一范式的基础上，需要确保数据库表中的每一列都和主键相关，而不能只与主键的某一部分相关（主要针对联合主键而言）。</p>
<p>（非主键字段必须全部依赖主键字段，而不能部分依赖）</p>
<p>学号和课程编号作为联合主键</p>
<p>课程名称只依赖于课程编号，而和学号没有关系</p>
<p><img src="E:/MySQL.assets/wps1.jpg" alt="img"></p>
<p>分析以上的设计发现数据冗余。学生只依赖主键中的学号；课程名称只依赖主键中的课程编号。违背第二范式。修改如下：</p>
<p>学生表</p>
<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/wps2.jpg" alt="img"> </p>
<p>2，课程表</p>
<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/wps3.jpg" alt="img"> </p>
<p>3，选课表</p>
<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/wps4.jpg" alt="img"> </p>
<h3 id="第三范式"><a href="#第三范式" class="headerlink" title="第三范式"></a>第三范式</h3><p>在第二范式的基础上，确保数据表中的每一列数据都和主键直接相关，而不能间接相关。</p>
<p>（非主键字段必须直接依赖主键字段，不能间接依赖）</p>
<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/wps5.jpg" alt="img"></p>
<p>以上数据冗余。班级名称和班级信息直接依赖班级编号，班级编号直接依赖主键学号，所以班级名称和班级信息间接依赖了主键学号。所以违背了第三范式。</p>
<p>修改如下：</p>
<p><strong>学生表</strong></p>
<p><img src="E:/%E7%AC%94%E8%AE%B0%E6%9C%AC/java/02%20MaSQL/MySQL.assets/wps6.jpg" alt="img"> </p>
<p><strong>班级表</strong></p>
<p><img src="E:/MySQL.assets/wps7.jpg" alt="img"></p>
<h2 id="MySQL用户管理和权限"><a href="#MySQL用户管理和权限" class="headerlink" title="MySQL用户管理和权限"></a>MySQL用户管理和权限</h2><blockquote>
<p>在MySQL中用户的唯一标识是： <code>&#39;用户名&#39;@&#39;主机名&#39;</code></p>
<p>用户名：就是创建的用户的名字</p>
<p>主机名：指定该用户在哪个主机上可以登陆。localhost表示该用户只能在本机登录。如果想让该用户可以从任意远程主机登陆，可以使用通配符%</p>
</blockquote>
<h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER [IF NOT EXISTS]</span><br><span class="line">    user(用户名) [auth_option] [, user [auth_option]] ...</span><br><span class="line">    [password_option | lock_option] ...</span><br><span class="line"></span><br><span class="line">auth_option: &#123;</span><br><span class="line">    IDENTIFIED BY &#x27;auth_string&#x27;</span><br><span class="line">  | IDENTIFIED WITH auth_plugin</span><br><span class="line">  | IDENTIFIED WITH auth_plugin BY &#x27;auth_string&#x27;</span><br><span class="line">  | IDENTIFIED WITH auth_plugin AS &#x27;auth_string&#x27;</span><br><span class="line">  | IDENTIFIED BY PASSWORD &#x27;auth_string&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">password_option: &#123;</span><br><span class="line">    PASSWORD EXPIRE</span><br><span class="line">  | PASSWORD EXPIRE DEFAULT</span><br><span class="line">  | PASSWORD EXPIRE NEVER</span><br><span class="line">  | PASSWORD EXPIRE INTERVAL N DAY</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 创建zhangsan用户</span><br><span class="line">-- &#x27;zhangsan&#x27;@&#x27;localhost&#x27; 表示张三只能在本地连接数据库</span><br><span class="line">create user &#x27;zhangsan&#x27;@&#x27;localhost&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line"></span><br><span class="line">-- &#x27;zhangsan&#x27;@&#x27;%&#x27; 表示张三只能在任意的主机上远程连接数据库</span><br><span class="line">-- 无主机登录</span><br><span class="line">create user &#x27;zhangsan&#x27;@&#x27;%&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line"></span><br><span class="line">-- 刷新权限</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<h3 id="修改用户"><a href="#修改用户" class="headerlink" title="修改用户"></a>修改用户</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER [IF EXISTS]</span><br><span class="line">    user [auth_option] [, user [auth_option]] ...</span><br><span class="line"></span><br><span class="line">ALTER USER [IF EXISTS]</span><br><span class="line">    USER() IDENTIFIED BY &#x27;auth_string&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">auth_option: &#123;</span><br><span class="line">    IDENTIFIED BY &#x27;auth_string&#x27;</span><br><span class="line">  | IDENTIFIED WITH auth_plugin</span><br><span class="line">  | IDENTIFIED WITH auth_plugin BY &#x27;auth_string&#x27;</span><br><span class="line">  | IDENTIFIED WITH auth_plugin AS &#x27;auth_string&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 修改用户的密码</span><br><span class="line">alter user &#x27;zhangsan&#x27;@&#x27;%&#x27; identified by &#x27;234567&#x27;;</span><br><span class="line"></span><br><span class="line">-- 刷新权限</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP USER [IF EXISTS] user [, user] ...</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 删除用户</span><br><span class="line">drop user &#x27;zhangsan&#x27;@&#x27;%&#x27;;</span><br><span class="line"></span><br><span class="line">-- 刷新权限</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<h3 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">GRANT</span><br><span class="line">    priv_type [(column_list)]</span><br><span class="line">      [, priv_type [(column_list)]] ...</span><br><span class="line">    ON  priv_level</span><br><span class="line">    TO user [auth_option] [, user [auth_option]] ...</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">priv_level: &#123;</span><br><span class="line">  *.*</span><br><span class="line">  | db_name.*</span><br><span class="line">  | db_name.tbl_name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">auth_option: &#123;</span><br><span class="line">    IDENTIFIED BY &#x27;auth_string&#x27;</span><br><span class="line">  | IDENTIFIED WITH auth_plugin</span><br><span class="line">  | IDENTIFIED WITH auth_plugin BY &#x27;auth_string&#x27;</span><br><span class="line">  | IDENTIFIED WITH auth_plugin AS &#x27;auth_string&#x27;</span><br><span class="line">  | IDENTIFIED BY PASSWORD &#x27;auth_string&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 授权</span><br><span class="line">-- 给用户&#x27;zhangsan&#x27;@&#x27;%&#x27;授予所有库下所有被的所有操作权限</span><br><span class="line">grant all on *.* to &#x27;zhangsan&#x27;@&#x27;%&#x27; identified by &#x27;234567&#x27;;</span><br><span class="line"></span><br><span class="line">-- 刷新权限</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<h3 id="取消授权"><a href="#取消授权" class="headerlink" title="取消授权"></a>取消授权</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">REVOKE</span><br><span class="line">    priv_type [(column_list)]</span><br><span class="line">      [, priv_type [(column_list)]] ...</span><br><span class="line">    ON [object_type] priv_level</span><br><span class="line">    FROM user [, user] ...</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 取消授权</span><br><span class="line">revoke all on *.* from &#x27;zhangsan&#x27;@&#x27;%&#x27; ;</span><br><span class="line">-- 刷新权限</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<h2 id="MySQL索引"><a href="#MySQL索引" class="headerlink" title="MySQL索引"></a>MySQL索引</h2><p>索引（index）: MySQL存储引擎为了<strong>提高查询效率</strong>而设计的一种数据结构。</p>
<p>索引相当于 字典中的索引目录。</p>
<h3 id="索引的分类"><a href="#索引的分类" class="headerlink" title="索引的分类"></a>索引的分类</h3><ul>
<li><p>主键索引：primary key</p>
</li>
<li><p>唯一索引:  unique</p>
</li>
<li><p>普通索引（单列索引，单值索引）: 就是给一个字段添加索引</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE [UNIQUE | FULLTEXT | SPATIAL] INDEX index_name</span><br><span class="line">    ON tbl_name (key_part,...)</span><br><span class="line">    [index_option]</span><br><span class="line">    [algorithm_option | lock_option] ...</span><br><span class="line"></span><br><span class="line">key_part:</span><br><span class="line">    col_name [(length)] [ASC | DESC]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- 创建表的时候，创建索引</span><br><span class="line">create table test01(</span><br><span class="line">  id int primary key,</span><br><span class="line">	name char(10),</span><br><span class="line">	age tinyint unsigned,</span><br><span class="line">	gender char(6),</span><br><span class="line">	-- 创建普通索引</span><br><span class="line">	key(name)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 表已经存在，创建索引</span><br><span class="line">-- 给test表的name字段创建索引</span><br><span class="line">create index index_name on test (name);</span><br></pre></td></tr></table></figure>
</li>
<li><p>复合索引：多个字段联合作为索引字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">create table test02(</span><br><span class="line">  id int primary key,</span><br><span class="line">	name char(10),</span><br><span class="line">	age tinyint unsigned,</span><br><span class="line">	address char(10),</span><br><span class="line">	gender char(6),</span><br><span class="line">	-- 创建复合索引</span><br><span class="line">	key(name,age,address)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">insert into test02 values(1,&#x27;zhangsan&#x27;,20,&#x27;beijing&#x27;,&#x27;male&#x27;);</span><br><span class="line">insert into test02 values(5,&#x27;lisi&#x27;,21,&#x27;tianjin&#x27;,&#x27;male&#x27;);</span><br><span class="line">insert into test02 values(2,&#x27;wangwu&#x27;,22,&#x27;beijing&#x27;,&#x27;male&#x27;);</span><br><span class="line">insert into test02 values(4,&#x27;zhaosi&#x27;,20,&#x27;shanghai&#x27;,&#x27;male&#x27;);</span><br><span class="line">insert into test02 values(3,&#x27;lily&#x27;,23,&#x27;chengdu&#x27;,&#x27;female&#x27;);</span><br><span class="line"></span><br><span class="line">-- 复合索引原则：</span><br><span class="line">-- 最左前缀匹配</span><br><span class="line">-- MySQL为了更好的使用索引，所以在使用索引字段的时候会调整顺序</span><br><span class="line">explain select * from test02 where name = &#x27;lisi&#x27;; -- ok</span><br><span class="line">explain select * from test02 where name = &#x27;lisi&#x27; and age = 22; -- ok</span><br><span class="line">explain select * from test02 where name = &#x27;lisi&#x27; and age = 22 and address = &#x27;chengdu&#x27;; -- ok </span><br><span class="line">explain select * from test02 where name = &#x27;lisi&#x27; and address = &#x27;chengdu&#x27;; -- ok</span><br><span class="line"></span><br><span class="line">explain select * from test02 where name = &#x27;lisi&#x27; and address = &#x27;chengdu&#x27; and age = 22; -- ok</span><br><span class="line"></span><br><span class="line">explain select * from test02 where address = &#x27;chengdu&#x27; and name = &#x27;lisi&#x27; and age = 22 ; -- ok</span><br><span class="line">explain select * from test02 where age = 22 and address = &#x27;chengdu&#x27; and name = &#x27;lisi&#x27;;</span><br><span class="line"></span><br><span class="line">-- 因为没有使用最左的索引字段，所以索引失效</span><br><span class="line">explain select * from test02 where age = 22 and address = &#x27;chengdu&#x27;; -- not ok</span><br><span class="line">-- % 开头索引会失效</span><br><span class="line">explain select * from test02 where name like &#x27;%lisi&#x27; and address = &#x27;chengdu&#x27;; -- not ok</span><br><span class="line">-- _ 开头索引会失效</span><br><span class="line">explain select * from test02 where name like &#x27;_lisi&#x27; and address = &#x27;chengdu&#x27;; -- not ok</span><br></pre></td></tr></table></figure>
</li>
<li><p>全文索引（MySQL的全文索引基本不用）- 了解</p>
</li>
</ul>
<h3 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP INDEX index_name ON tbl_name</span><br></pre></td></tr></table></figure>

<h3 id="索引的优缺点"><a href="#索引的优缺点" class="headerlink" title="索引的优缺点"></a>索引的优缺点</h3><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ul>
<li>提升了查询效率</li>
<li>减少了磁盘的IO</li>
</ul>
<h4 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h4><ul>
<li>增加了磁盘空间</li>
<li>降低了DML语句的了效率。因为增加、删除、修改数据都会影响索引文件的变动。Innodb中的索引使用B+Tree的数据结构，索引数据发生变化后，B+Tree为了保证平衡，会进行树的自旋转，所以会影响性能。</li>
</ul>
<h3 id="创建索引的注意点"><a href="#创建索引的注意点" class="headerlink" title="创建索引的注意点"></a>创建索引的注意点</h3><ul>
<li>经常更新的数据不宜使用索引。</li>
<li>值范围太小的字段不宜使用索引。比如：性别字段</li>
<li>Blob和Text字段不使用索引</li>
<li>数据量低于1000 行数据不建议使用索引</li>
<li>经常出现在where中的字段推荐使用索引</li>
<li>经常出现在group by中的字段推荐使用索引</li>
<li>经常出现在order by中的字段推荐使用索引</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">流光</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/post/c24675b4.html">http://example.com/post/c24675b4.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">流光</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://w.wallhaven.cc/full/g7/wallhaven-g76m7d.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/post/f255ffad.html"><img class="next-cover" src="https://w.wallhaven.cc/full/g7/wallhaven-g76m7d.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">docker</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/favicon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">流光</div><div class="author-info__description">大野要常来呀！</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/quhuiya" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:362848985@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.</span> <span class="toc-text">MySQL数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E7%9B%B8%E5%85%B3%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">1.1.</span> <span class="toc-text">MySQL相关的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.</span> <span class="toc-text">数据库的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.2.1.</span> <span class="toc-text">关系型数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">常见的关系型数据库</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93-NoSQL"><span class="toc-number">1.2.2.</span> <span class="toc-text">非关系型数据库  -NoSQL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">常见的非关系型数据库</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E4%B8%8B%E8%BD%BD%E5%92%8C%E5%AE%89%E8%A3%85"><span class="toc-number">1.3.</span> <span class="toc-text">MySQL下载和安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">1.4.</span> <span class="toc-text">MySQL客户端</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.5.</span> <span class="toc-text">SQL语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E5%88%86%E7%B1%BB"><span class="toc-number">1.5.1.</span> <span class="toc-text">SQL分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.6.</span> <span class="toc-text">MySQL的数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.6.1.</span> <span class="toc-text">数字类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.6.2.</span> <span class="toc-text">字符串类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.6.3.</span> <span class="toc-text">日期时间类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DDL%E8%AF%AD%E5%8F%A5%E2%80%BB%E2%80%BB"><span class="toc-number">1.7.</span> <span class="toc-text">DDL语句※※</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.7.1.</span> <span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.7.2.</span> <span class="toc-text">修改数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.7.3.</span> <span class="toc-text">删除数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8-%E2%80%BB%E2%80%BB%E2%80%BB"><span class="toc-number">1.7.4.</span> <span class="toc-text">创建数据表 ※※※</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-number">1.7.5.</span> <span class="toc-text">修改数据表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RENAME-TABLE-%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.7.6.</span> <span class="toc-text">RENAME TABLE 语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-number">1.7.7.</span> <span class="toc-text">删除数据表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TRUNCATE-TABLE-%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.7.8.</span> <span class="toc-text">TRUNCATE TABLE 语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.8.</span> <span class="toc-text">字段约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F-primary-key"><span class="toc-number">1.8.1.</span> <span class="toc-text">主键约束-primary key</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%94%AF%E4%B8%80%E6%80%A7%E7%BA%A6%E6%9D%9F-unique"><span class="toc-number">1.8.2.</span> <span class="toc-text">唯一性约束 - unique</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F-Not-Null"><span class="toc-number">1.8.3.</span> <span class="toc-text">非空约束 - Not Null</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E5%80%BC%E7%BA%A6%E6%9D%9F-default"><span class="toc-number">1.8.4.</span> <span class="toc-text">默认值约束 - default</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F-%E5%90%8E%E9%9D%A2%E8%AE%B2"><span class="toc-number">1.8.5.</span> <span class="toc-text">外键约束 - 后面讲</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E5%AE%BD%E5%BA%A6"><span class="toc-number">1.9.</span> <span class="toc-text">显示宽度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DML%E8%AF%AD%E5%8F%A5%E2%80%BB%E2%80%BB"><span class="toc-number">1.10.</span> <span class="toc-text">DML语句※※</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E8%AF%AD%E5%8F%A5-insert"><span class="toc-number">1.10.1.</span> <span class="toc-text">插入语句-insert</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E8%AF%AD%E5%8F%A5-update"><span class="toc-number">1.10.2.</span> <span class="toc-text">更新语句-update</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%AF%AD%E5%8F%A5-delete"><span class="toc-number">1.10.3.</span> <span class="toc-text">删除语句-delete</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E5%85%B3%E7%B3%BB"><span class="toc-number">1.11.</span> <span class="toc-text">表关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F-foreign-key"><span class="toc-number">1.12.</span> <span class="toc-text">外键约束 - foreign key</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.12.1.</span> <span class="toc-text">外键的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A%E7%9A%84%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.12.2.</span> <span class="toc-text">一对多的外键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%85%B3%E9%94%AE%E7%9A%84%E5%A4%96%E9%94%AE%E5%88%9B%E5%BB%BA"><span class="toc-number">1.12.3.</span> <span class="toc-text">多对多关键的外键创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.12.4.</span> <span class="toc-text">外键的注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DQL%E8%AF%AD%E5%8F%A5-%E2%80%BB-%E2%80%BB-%E2%80%BB-%E2%80%BB-%E2%80%BB"><span class="toc-number">1.13.</span> <span class="toc-text">DQL语句 ※ ※ ※ ※ ※</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.13.1.</span> <span class="toc-text">单表查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0%E5%92%8C%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.14.</span> <span class="toc-text">单行函数和操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E5%87%BD%E6%95%B0%E5%92%8C%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.14.1.</span> <span class="toc-text">比较函数和操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.14.2.</span> <span class="toc-text">逻辑操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.14.3.</span> <span class="toc-text">赋值运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%9C%AF%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.14.4.</span> <span class="toc-text">算术操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0"><span class="toc-number">1.14.5.</span> <span class="toc-text">数学函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="toc-number">1.14.6.</span> <span class="toc-text">流程控制函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-number">1.14.7.</span> <span class="toc-text">字符串函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0"><span class="toc-number">1.14.8.</span> <span class="toc-text">日期时间函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0-%E4%BA%86%E8%A7%A3"><span class="toc-number">1.14.9.</span> <span class="toc-text">转换函数 - 了解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%8D%E8%BF%90%E7%AE%97-%E4%BA%86%E8%A7%A3"><span class="toc-number">1.14.10.</span> <span class="toc-text">位运算 - 了解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E5%AF%86%E5%87%BD%E6%95%B0"><span class="toc-number">1.14.11.</span> <span class="toc-text">加密函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%87%BD%E6%95%B0"><span class="toc-number">1.14.12.</span> <span class="toc-text">其他函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E5%87%BD%E6%95%B0"><span class="toc-number">1.14.13.</span> <span class="toc-text">信息函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">1.15.</span> <span class="toc-text">单行函数的特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#order-by%E5%AD%90%E5%8F%A5"><span class="toc-number">1.16.</span> <span class="toc-text">order by子句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#limit-%E5%AD%90%E5%8F%A5"><span class="toc-number">1.17.</span> <span class="toc-text">limit 子句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E6%97%B6%E9%97%B4"><span class="toc-number">1.18.</span> <span class="toc-text">建表的时候自动更新时间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%EF%BC%9A"><span class="toc-number">1.19.</span> <span class="toc-text">补充：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#group-by%E5%AD%90%E5%8F%A5"><span class="toc-number">1.20.</span> <span class="toc-text">group by子句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0-%E5%A4%9A%E8%A1%8C%E5%87%BD%E6%95%B0-aggregate-functions"><span class="toc-number">1.21.</span> <span class="toc-text">聚合函数(多行函数) - aggregate-functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#where-%E5%92%8C-having%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.22.</span> <span class="toc-text">where 和 having的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%EF%BC%88%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%EF%BC%89-SQL92"><span class="toc-number">1.23.</span> <span class="toc-text">连接查询（多表查询）- SQL92</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.23.1.</span> <span class="toc-text">内连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">1.23.2.</span> <span class="toc-text">内连接的特点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%EF%BC%88%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%EF%BC%89-SQL99"><span class="toc-number">1.24.</span> <span class="toc-text">连接查询（多表查询）- SQL99</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5-inner-join"><span class="toc-number">1.24.1.</span> <span class="toc-text">内连接 - inner join</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5-outer-join"><span class="toc-number">1.24.2.</span> <span class="toc-text">外连接 - outer join</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5-left-join"><span class="toc-number">1.24.2.1.</span> <span class="toc-text">左外连接 - left join</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5-%E2%80%93-right-join"><span class="toc-number">1.24.2.2.</span> <span class="toc-text">右外连接 – right join</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E5%8F%89%E8%BF%9E%E6%8E%A5%E3%80%81%E8%87%AA%E7%84%B6%E8%BF%9E%E6%8E%A5%E3%80%81using%E5%AD%90%E5%8F%A5"><span class="toc-number">1.24.3.</span> <span class="toc-text">交叉连接、自然连接、using子句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.25.</span> <span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.25.1.</span> <span class="toc-text">单行子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.25.2.</span> <span class="toc-text">多行子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.25.3.</span> <span class="toc-text">相关子查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE-View"><span class="toc-number">1.26.</span> <span class="toc-text">视图 - View</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="toc-number">1.26.1.</span> <span class="toc-text">创建视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E6%80%BB%E7%BB%93"><span class="toc-number">1.26.2.</span> <span class="toc-text">视图的总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">1.27.</span> <span class="toc-text">存储引擎</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E4%BA%8B%E5%8A%A1-transaction"><span class="toc-number">1.28.</span> <span class="toc-text">MySQL事务 - transaction</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">1.28.1.</span> <span class="toc-text">事务的基本操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E8%B4%A6%E6%A1%88%E4%BE%8B"><span class="toc-number">1.28.2.</span> <span class="toc-text">转账案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84ACID%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7"><span class="toc-number">1.28.3.</span> <span class="toc-text">事务的ACID四大特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB-%E7%90%86%E8%A7%A3"><span class="toc-number">1.28.4.</span> <span class="toc-text">事务的隔离级别 - 理解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99-%E4%B8%89%E8%8C%83%E5%BC%8F"><span class="toc-number">1.29.</span> <span class="toc-text">数据库设计原则 - 三范式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%88NF-x3D-NormalForm%EF%BC%89"><span class="toc-number">1.29.1.</span> <span class="toc-text">概念（NF&#x3D; NormalForm）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E8%8C%83%E5%BC%8F%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.29.2.</span> <span class="toc-text">三范式的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9"><span class="toc-number">1.29.3.</span> <span class="toc-text">缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F"><span class="toc-number">1.29.4.</span> <span class="toc-text">第一范式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F"><span class="toc-number">1.29.5.</span> <span class="toc-text">第二范式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F"><span class="toc-number">1.29.6.</span> <span class="toc-text">第三范式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E5%92%8C%E6%9D%83%E9%99%90"><span class="toc-number">1.30.</span> <span class="toc-text">MySQL用户管理和权限</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-number">1.30.1.</span> <span class="toc-text">创建用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7"><span class="toc-number">1.30.2.</span> <span class="toc-text">修改用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-number">1.30.3.</span> <span class="toc-text">删除用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%88%E6%9D%83"><span class="toc-number">1.30.4.</span> <span class="toc-text">授权</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%96%E6%B6%88%E6%8E%88%E6%9D%83"><span class="toc-number">1.30.5.</span> <span class="toc-text">取消授权</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E7%B4%A2%E5%BC%95"><span class="toc-number">1.31.</span> <span class="toc-text">MySQL索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.31.1.</span> <span class="toc-text">索引的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="toc-number">1.31.2.</span> <span class="toc-text">删除索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">1.31.3.</span> <span class="toc-text">索引的优缺点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E7%82%B9"><span class="toc-number">1.31.3.1.</span> <span class="toc-text">优点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9-1"><span class="toc-number">1.31.3.2.</span> <span class="toc-text">缺点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E7%9A%84%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">1.31.4.</span> <span class="toc-text">创建索引的注意点</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/c24675b4.html" title="MySQL"><img src="https://w.wallhaven.cc/full/g7/wallhaven-g76m7d.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL"/></a><div class="content"><a class="title" href="/post/c24675b4.html" title="MySQL">MySQL</a><time datetime="2022-06-17T02:09:16.000Z" title="发表于 2022-06-17 10:09:16">2022-06-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/f255ffad.html" title="docker"><img src="https://w.wallhaven.cc/full/g7/wallhaven-g76m7d.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="docker"/></a><div class="content"><a class="title" href="/post/f255ffad.html" title="docker">docker</a><time datetime="2022-06-16T12:28:30.000Z" title="发表于 2022-06-16 20:28:30">2022-06-16</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://w.wallhaven.cc/full/g7/wallhaven-g76m7d.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 By 流光</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">欢迎大家访问我的博客</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>